webpackJsonp([10],{"+KvB":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("3j3K"),a=n("p3n4"),o=n("g5jc"),s=(n("XZJt"),n("NVOs")),r=n("Av7u"),c=(n.n(r),function(){function e(e){this.fuguWidgetService=e,this.SERVER_CLIENT_TIME_DIFF=2e3,this.selectedChatType=0,this.alive=!0,this.isConversationsLoading=!1,this.channelData={},this.userDetails=new Object,this.configData=new Object,this.hostname="",this.defaultMessageToPublish="",this.iPadState=!0,this.activeLanguage=new o.b,this.newConversationInitiated=new i.p,this.customerChatClicked=new i.p,this.openAgentConversations=new i.p,this.showNotificationsConfirmationEvent=new i.p,this.groupCallWindowEvent=new i.p,this.openConferenceEvent=new i.p,this.customerConversations=[],this.showBackButton=!0,this.showNotificationsConfirmation=!1,this.showNotificationsConfirmationTrigger=!1,this.isCustomerChat=!1,this.totalUnreadCount=0,this.customerwiseUnreadCount={},this.channelwiseUnreadCount={},this.customeConversationsChanged=new i.p,this.newPostMessageReceived=new i.p,this.endGroupCallEvent=new i.p,this.redirectionTooltipText="Hippo Chat",this.is_collapsed=!0,this.is_video_call_enabled="0",this.is_audio_call_enabled="0",this.o2o_in_dashboard_enabled="0",this.p2p_in_dashboard_enabled="0",this.agent_support_in_dashboard_enabled="0",this.browserChecks={isChrome:/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),isFirefox:/firefox/.test(navigator.userAgent.toLowerCase()),isWebkit:navigator.userAgent.search(/webkit/i)>=0,isEdge:"-ms-accelerator"in document.documentElement.style},this.language_array=["en","es","ar","hi","fr","ms","bn","pt-BR"],this.activityMessages=["ASSIGNED_TO_THEMSELVES","NEW_CHAT_ASSIGNED_TO_YOU","ASSIGNED_CHAT_TO","CHAT_REOPENED_BY","CHAT_WAS_AUTO_OPENED","CHAT_WAS_AUTO_CLOSED","CHAT_WAS_RE_OPENED","CHAT_WAS_CLOSED","CHAT_WAS_CLOSED","WAS_AUTO_ASSIGNED","WAS_FORCE_ASSIGNED","TAGGED","MENTIONED_YOU","CALLING_YOU","PAYMENT_REQUESTED","MISSED_CALL_FROM","RATING_AND_REVIEW","BOT_SKIPPED_FOR_THIS_SESSION","NEW_CUSTOMER"],this.restrict_personal_info_sharing=!1}return e.prototype.ngOnInit=function(){},e.prototype.postMessageToParentWindow=function(e){e.message_sender="NonCircularAgentIframe",window.parent.postMessage(e,this.parentOrigin)},e.prototype.putUserData=function(){var e=this.getUserBrowserDetails(),t={};this.deviceIdFromParent&&(this.f_uid_Id=this.deviceIdFromParent);var n,i="",a="",o="";if(this.f_uid_Id)o=this.f_uid_Id;else{var s=this.makeid();s+=this.fuguWidgetService.fuguWidgetData.appSecretKey||"",this.f_uid_Id=s,o=s}if(n=this.getCookie("f_uid"),this.fuguWidgetService.fuguWidgetData.address&&Object.keys(this.fuguWidgetService.fuguWidgetData.address).length&&(t.address={},t.address.name="",this.fuguWidgetService.fuguWidgetData.address.city&&(t.address.name+=this.fuguWidgetService.fuguWidgetData.address.city),this.fuguWidgetService.fuguWidgetData.address.country&&(t.address.name+=" "+this.fuguWidgetService.fuguWidgetData.address.country)),this.ip&&(t.ip=this.ip),-1!==this.currentUrl.indexOf("utm_source")){var r=(u=(c=this.currentUrl).indexOf("utm_source"))+c.substring(u).indexOf("&");i=c.substring(u+11,r)}if(-1!==this.currentUrl.indexOf("utm_medium")){var c,u;r=(u=(c=this.currentUrl).indexOf("utm_medium"))+c.substring(u).indexOf("&");a=c.substring(u+11,r)}var d={device_id:o,device_type:3,device_details:e,source:4,browser_language:navigator.language,current_url:this.currentUrl,lang:this.fuguWidgetService.getCurrentLanguage()};if(this.fuguWidgetService.fuguWidgetData.appSecretKey)d.app_secret_key=this.fuguWidgetService.fuguWidgetData.appSecretKey;else{if(!this.fuguWidgetService.fuguWidgetData.businessKey)throw new Error("no app_secret_key or business_unique_key provided");d.business_unique_key=this.fuguWidgetService.fuguWidgetData.businessKey}i&&(d.referral_url=i),a&&(d.marketing_campaign=a),this.fuguWidgetService.fuguWidgetData.uniqueId&&(d.user_unique_key=encodeURIComponent(this.fuguWidgetService.fuguWidgetData.uniqueId)),this.fuguWidgetService.fuguWidgetData.email&&(d.email=this.fuguWidgetService.fuguWidgetData.email),this.fuguWidgetService.fuguWidgetData.name&&(d.full_name=this.fuguWidgetService.fuguWidgetData.name),this.fuguWidgetService.fuguWidgetData.phone&&(d.phone_number=this.fuguWidgetService.fuguWidgetData.phone),this.fuguWidgetService.fuguWidgetData.customAttributes?d.custom_attributes=JSON.stringify(this.fuguWidgetService.fuguWidgetData.customAttributes)||JSON.stringify({}):d.custom_attributes=JSON.stringify({}),n&&(d.device_key=n);var l=this.getParameterByName(this.currentUrl,"utm_source"),g=this.getParameterByName(this.currentUrl,"utm_medium");return l&&(t.referral_url=l),g&&(t.marketing_campaign=g),d.attributes=JSON.stringify(t)||{},d.app_version_code=200,d},e.prototype.putUserDataForCustomer=function(){var e={};return this.fuguWidgetService.fuguWidgetData.customer_info.reseller_token&&(e.reseller_token=this.fuguWidgetService.fuguWidgetData.customer_info.reseller_token),this.fuguWidgetService.fuguWidgetData.customer_info.reference_id&&(e.reference_id=this.fuguWidgetService.fuguWidgetData.customer_info.reference_id),this.fuguWidgetService.fuguWidgetData.customer_info.user_unique_key&&(e.user_unique_key=this.fuguWidgetService.fuguWidgetData.customer_info.user_unique_key),this.fuguWidgetService.fuguWidgetData.appSecretKey&&(e.app_secret_key=this.fuguWidgetService.fuguWidgetData.appSecretKey),e.device_type=3,e.device_id=0,e.lang=this.fuguWidgetService.getCurrentLanguage(),e},e.prototype.getUserBrowserDetails=function(){var e="";screen.width&&(e+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));var t,n,i,a=navigator.appVersion,o=navigator.userAgent,s=navigator.appName,r=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10);-1!=(n=o.indexOf("Opera"))&&(s="Opera",r=o.substring(n+6),-1!=(n=o.indexOf("Version"))&&(r=o.substring(n+8))),-1!=(n=o.indexOf("OPR"))?(s="Opera",r=o.substring(n+4)):-1!=(n=o.indexOf("Edge"))?(s="Microsoft Edge",r=o.substring(n+5)):-1!=(n=o.indexOf("MSIE"))?(s="Microsoft Internet Explorer",r=o.substring(n+5)):-1!=(n=o.indexOf("Chrome"))?(s="Chrome",r=o.substring(n+7)):-1!=(n=o.indexOf("Safari"))?(s="Safari",r=o.substring(n+7),-1!=(n=o.indexOf("Version"))&&(r=o.substring(n+8))):-1!=(n=o.indexOf("Firefox"))?(s="Firefox",r=o.substring(n+8)):-1!=o.indexOf("Trident/")?(s="Microsoft Internet Explorer",r=o.substring(o.indexOf("rv:")+3)):(t=o.lastIndexOf(" ")+1)<(n=o.lastIndexOf("/"))&&(s=o.substring(t,n),r=o.substring(n+1),s.toLowerCase()==s.toUpperCase()&&(s=navigator.appName)),-1!=(i=r.indexOf(";"))&&(r=r.substring(0,i)),-1!=(i=r.indexOf(" "))&&(r=r.substring(0,i)),-1!=(i=r.indexOf(")"))&&(r=r.substring(0,i)),c=parseInt(""+r,10),isNaN(c)&&(r=""+parseFloat(navigator.appVersion),c=parseInt(navigator.appVersion,10));var u=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(a),d=!!navigator.cookieEnabled;"undefined"!=typeof navigator.cookieEnabled||d||(document.cookie="testcookie",d=-1!=document.cookie.indexOf("testcookie"));var l="-",g=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var h in g){var _=g[h];if(_.r.test(o)){l=_.s;break}}var p="-";switch(/Windows/.test(l)&&(p=/Windows (.*)/.exec(l)[1],l="Windows"),l){case"Mac OS X":p=/Mac OS X (10[\.\_\d]+)/.exec(o)[1];break;case"Android":p=/Android ([\.\_\d]+)/.exec(o)[1];break;case"iOS":p=(p=/OS (\d+)_(\d+)_?(\d+)?/.exec(a))[1]+"."+p[2]+"."+(0|p[3])}var m=navigator.language,f=window.location.href,v={screen:e,browser:s,browserVersion:r,browserMajorVersion:c,mobile:u,os:l,osVersion:p,cookies:d,browserLanguage:m,browserUrl:f=(f=f.replace("https://","")).replace("http://","")},S={"Browser Version":v.browserVersion,Browser:v.browser+" "+v.browserMajorVersion,"Browser Language":v.browserLanguage,OS:v.os+" "+v.osVersion,"Cookies Enabled":v.cookies,"Screen Size":v.screen,Source:v.browserUrl};return JSON.stringify(S)},e.prototype.getBrowserDetails=function(){navigator.appVersion;var e,t,n,i=navigator.userAgent,a=navigator.appName,o=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);-1!=(t=i.indexOf("Opera"))?(a="Opera",o=i.substring(t+6),-1!=(t=i.indexOf("Version"))&&(o=i.substring(t+8))):-1!=(t=i.indexOf("MSIE"))?(a="Microsoft Internet Explorer",o=i.substring(t+5)):-1!=(t=i.indexOf("Chrome"))?(a="Chrome",o=i.substring(t+7)):-1!=(t=i.indexOf("Safari"))?(a="Safari",o=i.substring(t+7),-1!=(t=i.indexOf("Version"))&&(o=i.substring(t+8))):-1!=(t=i.indexOf("Firefox"))?(a="Firefox",o=i.substring(t+8)):(e=i.lastIndexOf(" ")+1)<(t=i.lastIndexOf("/"))&&(a=i.substring(e,t),o=i.substring(t+1),a.toLowerCase()==a.toUpperCase()&&(a=navigator.appName)),-1!=(n=o.indexOf(";"))&&(o=o.substring(0,n)),-1!=(n=o.indexOf(" "))&&(o=o.substring(0,n)),s=parseInt(""+o,10),isNaN(s)&&(o=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10));var r=navigator.language,c=encodeURIComponent(window.location.href);return{Browser_name:a,Full_version:o,Major_version:s,navigator_appname:navigator.appName,navigator_userAgent:navigator.userAgent,browser_language:r,Source:c}},e.prototype.makeid=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<10;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e+=(new Date).getTime()},e.prototype.getCookie=function(e){var t=localStorage.getItem("fuguWidget");t&&(t=JSON.parse(t));var n=this.website_host;if(t&&n&&Object.keys(t).indexOf(n)>-1){var i=t[n][e];return i||""}return""},e.prototype.setCookie=function(e,t,n){new Date;var i=this.website_host,a=localStorage.getItem("fuguWidget");a?((a=JSON.parse(a))[i]||(a[i]={}),a[i][e]=t):((a={})[i]={},a[i][e]=t),localStorage.setItem("fuguWidget",JSON.stringify(a))},e.prototype.updateUserDetails=function(e){this.userDetails.business_name=e.business_name,this.userDetails.full_name=e.full_name,this.userDetails.user_channel=e.user_channel,this.userDetails.user_id=e.user_id,this.userDetails.user_unique_key=e.user_unique_key||"",this.userDetails.en_user_id=e.en_user_id||"",this.userDetails.access_token=e.access_token,this.userDetails.max_file_size=e.max_file_size,this.userDetails.agent_type=e.agent_type,this.userDetails.email=e.email,this.userDetails.user_image=e.user_image},e.prototype.updateConfigDetails=function(e){this.configData["button-new_conversation_visible"]=e["button-new_conversation_visible"],this.configData["color-background"]=e["color-background"],this.configData["color-text"]=e["color-text"],this.configData["color-theme"]=e["color-theme"],this.configData["color-title_bar"]=e["color-title_bar"],this.configData.push_based_on_chat=e.push_based_on_chat,this.configData["keys-external_api_custom_detail"]=e["keys-external_api_custom_detail"],this.configData["text-subtitle"]=e["text-subtitle"],this.configData["text-title"]=e["text-title"],this.configData.business_image=e.business_image,this.configData["background-color-theme"]=e["background-color-theme"],this.configData["typing-allignment"]=e["typing-allignment"],this.configData.show_widget_default_channel=!!+e.show_widget_default_channel,this.configData.is_jitsi_calling_enabled=e.is_jitsi_calling_enabled,this.configData.restrict_personal_info_sharing=e.restrict_personal_info_sharing,this.configData.is_web_push_enabled=e.is_web_push_enabled,this.configData.edit_delete_message_duration=e.edit_delete_message_duration,this.configData.business_currencies=e.business_currency},e.prototype.userLogout=function(e){var t=this,n=(this.getCookie("f_uid"),this.website_host),i=localStorage.getItem("device_uuid")||this.f_uid_Id,a="app_secret_key="+encodeURIComponent(this.fuguWidgetService.fuguWidgetData.appSecretKey)+"&en_user_id="+this.userDetails.en_user_id+"&device_id="+i+"&device_type=3";this.fuguWidgetService.logOutUser(a).takeWhile(function(){return t.alive}).subscribe(function(e){console.log("logout success"),t.postMessageToParentWindow({type:"Shutdown",data:{}})},function(e){console.log("logout error"),t.postMessageToParentWindow({type:"Shutdown",data:{}})}),localStorage.removeItem("f_uid_Id"),localStorage.removeItem("f_uid");var o=localStorage.getItem("fuguWidget");o&&(delete(o=JSON.parse(o))[n],localStorage.setItem("fuguWidget",JSON.stringify(o)))},e.prototype.getParameterByName=function(e,t){t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},Object.defineProperty(e.prototype,"f_uid_Id",{get:function(){var e=localStorage.getItem("fuguWidget"),t=this.website_host;return e&&(e=JSON.parse(e))[t]&&e[t].f_uid_Id||""},set:function(e){var t=localStorage.getItem("fuguWidget"),n=this.website_host;t?((t=JSON.parse(t))[n]||(t[n]={}),t[n].f_uid_Id=e):((t={})[n]={},t[n].f_uid_Id=e),localStorage.setItem("fuguWidget",JSON.stringify(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"website_host",{get:function(){var e=this.hostname,t=this.hostname.split(".").length-1,n=e.indexOf(".");return t>1&&(e=e.replace(e.substring(0,n+1),"")),e},enumerable:!0,configurable:!0}),e.prototype.fireAllErrors=function(e){var t=this;Object.keys(e.controls).forEach(function(n){var i=e.get(n);i instanceof s.h?(i.markAsTouched({onlySelf:!0}),i.markAsDirty({onlySelf:!0})):i instanceof s.j?t.fireAllErrors(i):i instanceof s.e&&i.controls.forEach(function(e){t.fireAllErrors(e)})})},e.prototype.playNotificationSound=function(e){document.getElementById("sound").innerHTML='<audio autoplay="autoplay"><source src="'+e+'.mp3" type="audio/mpeg" /><source src="'+e+'.ogg" type="audio/ogg" /><embed hidden="true" autostart="true" loop="false" src="'+e+'.mp3" /></audio>'},e.prototype.updateAndEmitUnreadCountOnFaye=function(e,t){"0"!=t?(this.channelwiseUnreadCount[e]?this.customerwiseUnreadCount[t]||(this.customerwiseUnreadCount[t]=this.channelwiseUnreadCount[e].unreadCount,-1==this.channelwiseUnreadCount[e].customersInvolved.indexOf(t)&&this.channelwiseUnreadCount[e].customersInvolved.push(t)):this.channelwiseUnreadCount[e]={customersInvolved:[t],unreadCount:0},this.customerwiseUnreadCount[t]||(this.customerwiseUnreadCount[t]=0),this.customerwiseUnreadCount[t]+=1,this.channelwiseUnreadCount[e].unreadCount+=1):(this.channelwiseUnreadCount[e]||(this.channelwiseUnreadCount[e]={customersInvolved:[],unreadCount:0}),this.channelwiseUnreadCount[e].unreadCount+=1),this.totalUnreadCount+=1,this.postMessageToParentWindow({type:"UnreadCount",data:this.customerwiseUnreadCount}),this.postMessageToParentWindow({type:"TotalUnreadCount",data:this.totalUnreadCount})},e.prototype.recalculateUnreadCount=function(e){var t=this;this.channelwiseUnreadCount[e]?this.channelwiseUnreadCount[e].customersInvolved.length&&this.channelwiseUnreadCount[e].customersInvolved.map(function(n){t.customerwiseUnreadCount[n]&&(t.customerwiseUnreadCount[n]-=t.channelwiseUnreadCount[e].unreadCount,t.customerwiseUnreadCount[n]<0&&(t.customerwiseUnreadCount[n]=0))}):this.channelwiseUnreadCount[e]={customersInvolved:[],unreadCount:0},this.totalUnreadCount-=this.channelwiseUnreadCount[e].unreadCount,this.channelwiseUnreadCount[e].unreadCount=0,this.postMessageToParentWindow({type:"UnreadCount",data:this.customerwiseUnreadCount}),this.postMessageToParentWindow({type:"TotalUnreadCount",data:this.totalUnreadCount})},e.prototype.ngOnDestroy=function(){this.alive=!1},e.prototype.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},e.prototype.changeComponentLanguage=function(e){this.activeLanguage.next(e)},e.prototype.getComponentLanguage=function(){return this.activeLanguage.asObservable()},e.prototype.checkLanguageAcceptance=function(e){return!!this.language_array.includes(e)},e.prototype.getUserData=function(){var e={};try{var t=localStorage.getItem("agent_user_data");t&&(e=JSON.parse(t)),"object"!=typeof e&&(e={})}catch(t){e={},console.warn(t)}return e},e.prototype.setUserData=function(){if(this.userDetails){var e={name:this.userDetails.full_name||"",email:this.userDetails.email||"",image:this.userDetails.user_image||"",jitsiUrl:this.jitsiUrl||""};try{localStorage.setItem("agent_user_data",JSON.stringify(e))}catch(e){console.warn(e)}}},e.prototype.removeUserData=function(){try{localStorage.removeItem("agent_user_data")}catch(e){console.warn(e)}},e.prototype.translateActivityMessage=function(e,t){if(e&&e.message&&e.multi_lang_message)try{for(var n=0;n<this.activityMessages.length;n++){var i=new RegExp("{{{"+this.activityMessages[n]+"}}}","g");e.multi_lang_message=e.multi_lang_message.replace(i," "+t.instant("ActivityMessage."+this.activityMessages[n])+" ").replace().trim()}e.multi_lang_message.includes("{{{")||(e.message=e.multi_lang_message)}catch(e){console.warn(e)}},e.prototype.setChatValidationValue=function(e){this.restrict_personal_info_sharing=e},e.prototype.hippoPanelCloseConferenceEvent=function(){try{this.postMessageToParentWindow({type:"CloseHippoConferenceEvent",data:{close:!0}})}catch(e){console.warn(e)}},e.prototype.checkSingleEmoji=function(e){return 0==e.replace(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|[\ud83c[\ude50\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,"").length},e.prototype.isControlTouchedAndInvalid=function(e){return!(!e.touched||!e.invalid)},e.prototype.getAESEncryptedAuthToken=function(e,t){return r.AES.encrypt(e,t).toString()},e.prototype.updateTimeDifference=function(e){var t=this;return new Promise(function(n,i){t.SERVER_CLIENT_TIME_DIFF=2e3;var a=(new Date).getTime(),o=e-a;t.SERVER_CLIENT_TIME_DIFF+=o,localStorage.setItem("SERVER_CLIENT_TIME_DIFF",String(t.SERVER_CLIENT_TIME_DIFF)),n(t.SERVER_CLIENT_TIME_DIFF)})},e.ctorParameters=function(){return[{type:a.a}]},e}())},0:function(e,t,n){e.exports=n("x35b")},1:function(e,t){},"2CBl":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n("3j3K"),a=n("zCXK"),o=n("+KvB"),s=n("p3n4"),r=n("5QFO"),c=n("XBTN"),u=function(){function e(e,t,a,o){this.socketIoService=e,this.messageService=t,this.commonService=a,this.fuguWidgetService=o,this.alive=!0,this.active_channel_object=null,this.uploadImageEmitter=new i.p,this.uploadingTextEmitter=new i.p,this.uuidv4=n("DtRx")}return e.prototype.filesUpload=function(e,t,n){var i=this;if(e){if(e.size>this.commonService.userDetails.max_file_size)return void alert("File size should be smaller than "+(this.commonService.userDetails.max_file_size/1024/1024).toFixed(0)+" mb.");var o=e.type||"application/octet-stream",s=o.split("/"),r=e.name.replace(/[^0-9a-zA-Z.]/g,"");this.uploadingTextEmitter.emit(!0);var c=JSON.parse(JSON.stringify(t)),u={app_secret_key:this.fuguWidgetService.fuguWidgetData.appSecretKey||"",file_name:r.trim(),file_type:o};this.fuguWidgetService.getPresignedURL(u).subscribe(function(t){var u;if(t&&t.data&&t.data.source_url&&t.data.url){var d=t.data.url,l=t.data.source_url;if(t.data.thumbnail_source_url&&t.data.thumbnail_url){var g,h=t.data.thumbnail_url,_=t.data.thumbnail_source_url,p=document.createElement("video"),m=document.createElement("canvas"),f=i;p.src=window.URL.createObjectURL(e),p.muted=!0,p.play(),p.addEventListener("loadedmetadata",function(){setTimeout(function(){m.width=p.videoWidth||250,m.height=p.videoHeight||250,m.getContext("2d").drawImage(p,0,0,m.width,m.height),g=m.toDataURL("image/jpeg"),f.fuguWidgetService.uploadfileAWSS3(h,"image/jpeg",f.urltoFile(g,r,"image/jpeg")).subscribe(function(e){e&&e.status&&200==e.status&&(u=_)},function(e){console.warn(e)})})})}i.fuguWidgetService.uploadfileAWSS3(d,o,e).subscribe(function(t){if(t&&t.status&&200==t.status){n&&i.uploadingTextEmitter.emit(!1);var o=moment().utc().format();o=o.replace("Z",".000Z");var d={message:"",full_name:i.commonService.userDetails.full_name,user_id:i.commonService.userDetails.user_id,date_time:o,is_typing:a.o.Typing_End,user_type:a.p.Customer,file_name:r,message_status:a.h.Sent,thumbnail_url:u||l};if("image"!=s[0]||["vnd.adobe.photoshop","psd","tiff"].includes(s[1])){g={message_type:a.i.File_Message,url:l,document_type:i.checkFileType(s),file_size:i.calculateFileSize(e.size)};d=Object.assign(d,g)}else{var g={message_type:a.i.Image_Message,image_url:l};g=Object.assign(g,i.getImageHeightWidth(e)),d=Object.assign(d,g)}c.channel_id==i.active_channel_object.channel_id&&i.active_channel_object.channel_id>-1?i.uploadImageEmitter.emit(d):-1!=c.channel_id&&(d.muid=i.uuidv4(),i.socketIoService.publishOnChannel(c.channel_id,d))}},function(e){i.uploadingTextEmitter.emit(!1)})}},function(e){e=JSON.parse(e._body),console.log("Inside error",e),i.uploadingTextEmitter.emit(!1),i.messageService.sendAlert({type:"success",msg:e.message,timeout:3e3})})}},e.prototype.calculateFileSize=function(e){var t=Math.floor(Math.log(e)/Math.log(1024));return e?(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]:"0 Bytes"},e.prototype.getImageHeightWidth=function(e){return new Promise(function(t,n){var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){var n=new Image;n.src=e.target.result,n.onload=function(){t({image_width:n.width,image_height:n.height})}}})},e.prototype.checkFileType=function(e){return["audio","video"].includes(e[0])&&!["ogg"].includes(e[1])?e[0]:"file"},e.prototype.urltoFile=function(e,t,n){for(var i=e.split(","),a=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,r=new Uint8Array(s);s--;)r[s]=o.charCodeAt(s);return new File([r],t,{type:a})},e.prototype.ngOnDestroy=function(){this.alive=!1},e.ctorParameters=function(){return[{type:r.a},{type:c.a},{type:o.a},{type:s.a}]},e}()},"5QFO":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n("3j3K"),a=n("kZql"),o=n("+KvB"),s=n("p3n4"),r=n("zCXK"),c=n("DmT9"),u=(n.n(c),n("Av7u")),d=(n.n(u),function(){function e(e,t){this.commonService=e,this.fuguWidgetService=t,this._destroyCheck=!1,this.isSocketConnected=!1,this.chatNonReassignEvent=new i.p,this.activeChannelIdMessageEvent=new i.p,this.activeChannelIdTypingEvent=new i.p,this.activeChannelIdMessageSentEvent=new i.p,this.readAllEvent=new i.p,this.messageDeliveredEvent=new i.p,this.messageReadEvent=new i.p,this.connectionStateEvent=new i.p,this.removeMessageEvent=new i.p}return e.prototype.setupHandshake=function(){this.socket.emit(r.m.HANDSHAKE,{en_user_id:this.commonService.userDetails.en_user_id,access_token:this.commonService.userDetails.access_token,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Handshake",e)})},e.prototype.subscribeToUser=function(){var e=this;this.socket.emit(r.m.UNSUBSCRIBE_USER,{channel:"/"+this.commonService.userDetails.user_channel,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(t){console.log("Unsubscribed to user",t),e.socket.emit(r.m.SUBSCRIBE_USER,{channel:"/"+e.commonService.userDetails.user_channel,access_token:e.commonService.userDetails.access_token,en_user_id:e.commonService.userDetails.en_user_id,agent_type:e.commonService.userDetails.agent_type,lang:e.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Subscribed to user",e)})}),this.socket.emit(r.m.SUBSCRIBE_USER,{channel:"/"+this.commonService.userDetails.user_channel,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Subscribed to user",e)})},e.prototype.subscribeToUserForCall=function(e,t){var n=this,i=e&&e.access_token||"",a=e&&e.en_user_id||"",o=e&&e.agent_type||"";this.socket.emit(r.m.UNSUBSCRIBE_USER,{channel:"/"+this.commonService.userDetails.user_channel,access_token:i,en_user_id:a,agent_type:o,lang:t||"en"},function(e){console.log("Unsubscribed to user",e),n.socket.emit(r.m.SUBSCRIBE_USER,{channel:"/"+n.commonService.userDetails.user_channel,access_token:i,en_user_id:a,agent_type:o,lang:t||"en"},function(e){console.log("Subscribed to user",e)})}),this.socket.emit(r.m.SUBSCRIBE_USER,{channel:"/"+this.commonService.userDetails.user_channel,access_token:i,en_user_id:a,agent_type:o,lang:t||"en"},function(e){console.log("Subscribed to user",e)})},e.prototype.setupCallHandshake=function(e){var t=e&&e.access_token||"",n=e&&e.en_user_id||"",i=e&&e.agent_type||"";this.socket.emit(r.m.HANDSHAKE,{access_token:this.commonService.userDetails&&this.commonService.userDetails.access_token||t,en_user_id:this.commonService.userDetails&&this.commonService.userDetails.en_user_id||n,agent_type:this.commonService.userDetails&&this.commonService.userDetails.agent_type||i,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Handshake",e)})},e.prototype.subscribeToApp=function(){var e=this;this.socket.emit(r.m.UNSUBSCRIBE_APP,{channel:"/"+this.fuguWidgetService.fuguWidgetData.appSecretKey,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(t){console.log("Unsubscribed to app",t),e.socket.emit(r.m.SUBSCRIBE_APP,{channel:"/"+e.fuguWidgetService.fuguWidgetData.appSecretKey,access_token:e.commonService.userDetails.access_token,en_user_id:e.commonService.userDetails.en_user_id,agent_type:e.commonService.userDetails.agent_type,lang:e.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Subscribed to app",e)})}),this.socket.emit(r.m.SUBSCRIBE_APP,{channel:"/"+this.fuguWidgetService.fuguWidgetData.appSecretKey,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Subscribed to app",e)})},e.prototype.setupSocketConnection=function(){var e=this;this.socket=c(a.a.SOCKET_ENDPOINT,{transports:["websocket"],query:{device_details:JSON.stringify(this.commonService.getBrowserDetails())||navigator.userAgent,device_id:localStorage.getItem("device_uuid"),device_type:3,auth_token:this.getAESEncryptedValue()}}),this.socket.on("connect",function(t){e.isSocketConnected=!0,console.log("Conencted Client "+e.socket.id+" "+(new Date).toLocaleTimeString()),e.setupHandshake(),e.subscribeToUser(),e.subscribeToApp(),e.connectionStateEvent.emit({state:r.l.CONNECTED})}),this.socket.on("connecting",function(){e.connectionStateEvent.emit({state:r.l.CONNECTING}),console.log("socket.io connecting")}),this.socket.on("reconnect",function(){e.isSocketConnected=!0,e.connectionStateEvent.emit({state:r.l.CONNECTED}),e.setupHandshake(),e.subscribeToUser(),e.subscribeToApp(),void 0!=e.activeChannelId&&e.socket.emit(r.m.SUBSCRIBE_CHANNEL,{channel:"/"+e.activeChannelId,access_token:e.commonService.userDetails.access_token,en_user_id:e.commonService.userDetails.en_user_id,agent_type:e.commonService.userDetails.agent_type,lang:e.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Subscribed to channel",e)}),console.log("you have been reconnected "+(new Date).toLocaleTimeString())}),this.socket.on("connect_error",function(t){e.isSocketConnected=!1,e.connectionStateEvent.emit({state:r.l.DISCONNECTED}),console.log("Connection "+t)}),this.socket.on("connect_timeout",function(t){e.isSocketConnected=!1,e.connectionStateEvent.emit({state:r.l.DISCONNECTED}),console.log("Connection Timeout "+t)}),this.socket.on("reconnect_attempt",function(e){console.log("Reconnection Attempt "+e)}),this.socket.on("reconnecting",function(t){e.socket.query.auth_token=e.getAESEncryptedValue(),console.log("Reconnecting "+t)}),this.socket.on("reconnect_error",function(){e.isSocketConnected=!1,e.connectionStateEvent.emit({state:r.l.DISCONNECTED}),console.log("attempt to reconnect has failed")}),this.socket.on("disconnect",function(t){e.isSocketConnected=!1,e.connectionStateEvent.emit({state:r.l.DISCONNECTED}),e.socket.query.auth_token=e.getAESEncryptedValue(),"io server disconnect"===t&&e.socket.connect(),console.log("Socket disconnected for: "+t+" "+(new Date).toLocaleTimeString())}),this.socket.on(r.m.SOCKET_EVENT,function(t){a.a.production||console.warn("SOCKET_EVENT",t),t&&e.commonService.userDetails&&t.channel=="/"+e.commonService.userDetails.user_channel&&e.onSocketUserEvent(t),t&&t.channel=="/"+e.activeChannelId&&e.onSocketChannelEvent(t)})},e.prototype.subscribeToChannel=function(e){this.activeChannelId&&this.socket.emit(r.m.UNSUBSCRIBE_CHANNEL,{channel:"/"+this.activeChannelId,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Unsubscribed to channel",e)}),this.activeChannelId=e,this.socket.emit(r.m.SUBSCRIBE_CHANNEL,{channel:"/"+e,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Subscribed to channel",e)})},e.prototype.subscribeToCallChannel=function(e,t){var n=this,i=t&&t.access_token||"",a=t&&t.en_user_id||"",o=t&&t.agent_type||"";return this.activeCallChannelId&&this.socket.emit(r.m.UNSUBSCRIBE_CHANNEL,{channel:"/"+this.activeCallChannelId,access_token:this.commonService.userDetails&&this.commonService.userDetails.access_token||i,en_user_id:this.commonService.userDetails&&this.commonService.userDetails.en_user_id||a,agent_type:this.commonService.userDetails&&this.commonService.userDetails.agent_type||o,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Unsubscribed to channel",e)}),this.activeCallChannelId=e,new Promise(function(t,s){n.socket.emit(r.m.SUBSCRIBE_CHANNEL,{channel:"/"+e,access_token:n.commonService.userDetails&&n.commonService.userDetails.access_token||i,en_user_id:n.commonService.userDetails&&n.commonService.userDetails.en_user_id||a,agent_type:n.commonService.userDetails&&n.commonService.userDetails.agent_type||o,lang:n.fuguWidgetService.getCurrentLanguage()||"en"},function(e){t(e),console.log("Subscribed to channel",e)})})},e.prototype.setupVideoCallSubscriptions=function(e,t,n){var i=this,o=t&&t.access_token||t.userDetails.access_token||"",s=t&&t.en_user_id||t.userDetails.en_user_id||"",u=t&&t.agent_type||"",d=parseInt(localStorage.getItem("SERVER_CLIENT_TIME_DIFF"));return this.socket=c(a.a.SOCKET_ENDPOINT,{transports:["websocket"],query:{device_details:JSON.stringify(this.commonService.getBrowserDetails())||navigator.userAgent,device_id:localStorage.getItem("device_uuid"),device_type:3,auth_token:this.getAESEncryptedValue(o,s,d)}}),new Promise(function(c,l){i.socket.on("connect",function(n){i.isSocketConnected=!0,console.log("Conencted Client "+i.socket.id+" "+(new Date).toLocaleTimeString()),i.setupCallHandshake(t),i.subscribeToCallChannel(e,t).then(function(e){c(e)})}),i.socket.on("connecting",function(){console.log("socket.io connecting")}),i.socket.on("reconnect",function(){i.setupCallHandshake(t),void 0!=e&&i.socket.emit(r.m.SUBSCRIBE_CHANNEL,{channel:"/"+e,access_token:i.commonService.userDetails&&i.commonService.userDetails.access_token||o,en_user_id:i.commonService.userDetails&&i.commonService.userDetails.en_user_id||s,agent_type:i.commonService.userDetails&&i.commonService.userDetails.agent_type||u,lang:i.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Subscribed to channel",e)}),console.log("you have been reconnected "+(new Date).toLocaleTimeString())}),i.socket.on("connect_error",function(e){console.log("Connection "+e)}),i.socket.on("connect_timeout",function(e){console.log("Connection Timeout "+e)}),i.socket.on("reconnect_attempt",function(e){console.log("Reconnection Attempt "+e)}),i.socket.on("reconnecting",function(t){i.socket.query.auth_token=i.getAESEncryptedValue(o,s,d),console.log("Reconnecting "+t),void 0!=e&&i.socket.emit(r.m.SUBSCRIBE_CHANNEL,{channel:"/"+e,access_token:i.commonService.userDetails&&i.commonService.userDetails.access_token||o,en_user_id:i.commonService.userDetails&&i.commonService.userDetails.en_user_id||s,agent_type:i.commonService.userDetails&&i.commonService.userDetails.agent_type||u,lang:i.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Subscribed to channel",e)})}),i.socket.on("reconnect_error",function(){console.log("attempt to reconnect has failed")}),i.socket.on("disconnect",function(e){i.socket.query.auth_token=i.getAESEncryptedValue(o,s,d),"io server disconnect"===e&&i.socket.connect(),console.log("Socket disconnected for: "+e+" "+(new Date).toLocaleTimeString())}),i.socket.on(r.m.SOCKET_EVENT,function(e){a.a.production||console.warn("SOCKET_EVENT",e),e&&e.channel=="/"+i.activeCallChannelId&&i.onSocketCallEvent(e),n&&e&&e.channel=="/"+n&&i.onSocketUserEvent(e)})})},e.prototype.sendMessage=function(e){var t=this,n=e&&e.is_typing==r.o.Typing_End,i=-1;return n&&(i=e.index),new Promise(function(o,s){if("object"==typeof e&&(e=Object.assign(e,{is_web:!0,device_payload:{device_details:navigator.userAgent,device_id:localStorage.getItem("device_uuid"),device_type:3}})),void 0!=t.activeChannelId){var c={muid:e.muid,user_id:t.commonService.userDetails.user_id};t.socket.emit(r.m.MESSAGE_NEW,{channel:"/"+t.activeChannelId,access_token:t.commonService.userDetails.access_token,en_user_id:t.commonService.userDetails.en_user_id,agent_type:t.commonService.userDetails.agent_type,data:e,lang:t.fuguWidgetService.getCurrentLanguage()||"en",auth0:e&&"0"==e.is_typing?t.commonService.getAESEncryptedAuthToken(JSON.stringify(c),a.a.AUTHENTICATION_KEY):0},function(r,c){if(r)console.warn("error in message send",r),s(r);else{if(a.a.production||console.log("message sent to server!"),c.error)switch(c.error.statusCode){case 417:t.removeMessageEvent.emit({message:c.error.message,message_data:e,show_error:c.error.showError})}if(c.error)switch(c.error.statusCode){case 418:t.removeMessageEvent.emit({message:c.error.message,message_data:e,show_error:c.error.showError})}n&&-1!=i&&t.activeChannelIdMessageSentEvent.emit({index:i}),o(c)}})}})},e.prototype.onSocketUserEvent=function(e){if(a.a.production||console.warn("=========== USER SUBSCRIPTION EVENT",e),e&&"object"==typeof e){if(e.error&&this.commonService.configData&&"1"==this.commonService.configData.restrict_personal_info_sharing&&417==e.error.statusCode)return;switch(e.notification_type){case r.j.Read_All:this.messageReadEvent.emit(e);break;default:this.chatNonReassignEvent.emit(e)}}},e.prototype.onSocketChannelEvent=function(e){if(a.a.production||console.warn("=========== CHANNEL SUBSCRIPTION EVENT",e),e&&"object"==typeof e){if(e.error&&this.commonService.configData&&"1"==this.commonService.configData.restrict_personal_info_sharing&&417==e.error.statusCode)return;if(e.error&&this.commonService.configData&&418==e.error.statusCode)return;switch(e.notification_type){case r.j.Read_All:this.messageReadEvent.emit(e);break;case r.j.MODIFY_MESSAGE:this.activeChannelIdMessageEvent.emit(e);break;default:switch(e.is_typing){case r.o.Typing_Start:case r.o.Typing_Stopped:this.activeChannelIdTypingEvent.emit(e);break;case r.o.Typing_End:a.a.production||console.log("Faye Service => active channel response: ",e),this.activeChannelIdMessageEvent.emit(e)}}}},e.prototype.onSocketAppEvent=function(e){var t=this;if(a.a.production||console.warn("=========== APP SUBSCRIPTION EVENT",e),e&&"object"==typeof e)switch(e.notification_type){case r.j.Read_All:e.user_type==r.p.Customer&&e.channelId==this.activeChannelId&&this.readAllEvent.emit(e);break;case r.j.Read_Unread:e.channelId==this.activeChannelId&&(e.delivered_at?this.messageDeliveredEvent.emit(e):this.messageReadEvent.emit(e));break;case r.j.User_Migration:var n=this.commonService.userDetails.user_id;console.log("Widget Faye Migration: ",e),n!=e.migrated_to&&n!=e.user_id||(console.log("valid user migration"),this.fuguWidgetService.putUserDetails(this.commonService.putUserData()).takeWhile(function(){return t.alive}).subscribe(function(e){var n=e.data.device_key;if(t.commonService.setCookie("f_uid",n,10),t.commonService.updateUserDetails(e.data),t.commonService.postMessageToParentWindow({type:"Collapse"}),t.unsubscribeAllSubscriptions(!1),t.setupSocketConnection(),t.commonService.userDetails.user_unique_key.length>1)t.commonService.isConversationListValid=Object.keys(e.data.conversations).length>0;else{var i=e.data.conversations.filter(function(e){return-1!=e.channel_id});t.commonService.isConversationListValid=0!=i.length}}));break;case r.j.User_Logout:if(e.user_id==this.commonService.userDetails.user_id){localStorage.removeItem("f_uid_Id"),localStorage.removeItem("f_uid");var i=localStorage.getItem("fuguWidget");i&&(delete(i=JSON.parse(i))[this.commonService.website_host],localStorage.setItem("fuguWidget",JSON.stringify(i))),this.unsubscribeAllSubscriptions(!0),this.commonService.postMessageToParentWindow({type:"Shutdown",data:{}})}}},e.prototype.onSocketCallEvent=function(e){if(a.a.production||console.warn("=========== CALL SUBSCRIPTION EVENT",e),e&&"object"==typeof e)switch(e.notification_type){case r.j.Read_All:this.messageReadEvent.emit(e);break;default:switch(e.is_typing){case r.o.Typing_Start:case r.o.Typing_Stopped:this.activeChannelIdTypingEvent.emit(e);break;case r.o.Typing_End:a.a.production||console.log("Faye Service => active channel response: ",e),this.activeChannelIdMessageEvent.emit(e)}}},e.prototype.publishOnChannel=function(e,t,n){var i=this,a=n&&n.access_token||"",o=n&&n.en_user_id||"",s=n&&n.agent_type||"";return"object"==typeof t&&(t=Object.assign(t,{is_web:!0,device_payload:{device_details:navigator.userAgent,device_id:localStorage.getItem("device_uuid"),device_type:3}})),new Promise(function(n,c){i.socket.emit(r.m.MESSAGE_CHANNEL,{channel:"/"+e,access_token:i.commonService.userDetails&&i.commonService.userDetails.access_token||a,en_user_id:i.commonService.userDetails&&i.commonService.userDetails.en_user_id||o,agent_type:i.commonService.userDetails&&i.commonService.userDetails.agent_type||s,data:t,lang:i.fuguWidgetService.getCurrentLanguage()||"en"},function(e,t){n(e||t),console.log("message sent on channel",t)})})},e.prototype.unsubscribeApp=function(){this.socket&&this.fuguWidgetService.fuguWidgetData&&this.fuguWidgetService.fuguWidgetData.appSecretKey&&this.socket.emit(r.m.UNSUBSCRIBE_APP,{channel:"/"+this.fuguWidgetService.fuguWidgetData.appSecretKey,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Unsubscribed to channel",e)})},e.prototype.unsubscribeUser=function(){this.socket&&this.commonService.userDetails&&this.commonService.userDetails.user_channel&&this.socket.emit(r.m.UNSUBSCRIBE_USER,{channel:"/"+this.commonService.userDetails.user_channel,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Unsubscribed to channel",e)})},e.prototype.unsubscribeToActiveChannel=function(){this.activeChannelId&&this.socket&&this.socket.emit(r.m.UNSUBSCRIBE_CHANNEL,{channel:"/"+this.activeChannelId,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Unsubscribed to channel",e)})},e.prototype.unsubscribeChannel=function(e){e&&this.socket&&this.socket.emit(r.m.UNSUBSCRIBE_CHANNEL,{channel:"/"+e,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){console.log("Unsubscribed to channel",e)})},e.prototype.unsubscribeAllSubscriptions=function(e,t){this._destroyCheck=e,e&&console.log(t,new Date);try{this.unsubscribeUser(),this.unsubscribeChannel(this.activeChannelId),this.socket&&this.socket.close(),this.activeChannelId=0}catch(e){console.warn(e)}},e.prototype.sendAckRead=function(e){void 0!=this.activeChannelId&&this.socket.emit(r.m.MESSAGE_ACKNOWLEDGEMENT,{channel:"/"+this.activeChannelId,access_token:this.commonService.userDetails.access_token,en_user_id:this.commonService.userDetails.en_user_id,agent_type:this.commonService.userDetails.agent_type,data:e,lang:this.fuguWidgetService.getCurrentLanguage()||"en"},function(e){a.a.production||console.log("message sent to server!",e)})},e.prototype.ping=function(){if(!this._destroyCheck&&this.commonService.userDetails){var e=moment().utc().format();e=e.replace("Z",".000Z");var t={message:"",full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:e,is_typing:r.o.Typing_Stopped,message_type:r.i.Customer_Agent_Message,user_type:r.p.Customer,on_subscribe:1};this.isSocketConnected&&this.sendMessage(t)}},e.prototype.getAESEncryptedValue=function(e,t,n){var i=new Date;n?i.setSeconds(i.getSeconds()+n/1e3):i.setSeconds(i.getSeconds()+this.commonService.SERVER_CLIENT_TIME_DIFF/1e3);var o={user_type:r.p.Customer,en_user_id:this.commonService.userDetails.en_user_id||t,access_token:this.commonService.userDetails.access_token||e,created_at:i.toISOString()};return u.AES.encrypt(JSON.stringify(o),a.a.AUTHENTICATION_KEY).toString()},e.ctorParameters=function(){return[{type:o.a},{type:s.a}]},e}())},"6GLz":function(e,t,n){var i={"./modules/calling/calling.module.ngfactory":["lyQF",0,8],"./modules/conference-link/conference-link.module.ngfactory":["C7vl",7],"./modules/conference/conference.module.ngfactory":["UCC0",0,6],"./modules/layout/layout.module.ngfactory":["k+8m",2,0],"./modules/new-payment-request/new-payment-request.module.ngfactory":["WOR3",5],"./modules/payment-request/payment-request.module.ngfactory":["vEvk",4],"./modules/permissions/permissions.module.ngfactory":["mK+k",3],"./modules/video-call/video-call.module.ngfactory":["Jyo+",1,0]};function a(e){var t=i[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}a.keys=function(){return Object.keys(i)},a.id="6GLz",e.exports=a},"NG/o":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){return function(){}}()},PP02:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.getValidatorErrorMessage=function(e,t){return{required:"This field is required.",invalidCreditCard:"Please enter a valid credit card number.",invalidEmailAddress:"Please enter a valid email address.",invalidPassword:"Please enter a valid password. Password must be at least 6 characters long, and contain a number.",minlength:"This field must be "+t.requiredLength+" characters long.",maxlength:"This field must be "+t.requiredLength+" characters long.",min:"This field must be greater than "+(t.min-1)+".",max:"This field must be less than "+(t.max+1)+".",invalidPhoneNumber:"Please enter a valid phone number.",invalidZipCode:"Please enter a valid ZIP Code.",invalidVIN:"Please enter a valid VIN.",invalidWeight:"Weight value should not exceed 250.",invalidCapacity:"Vehicle Capcity should not exceed 5500.",invalidOTP:"Please enter a valid OTP",pattern:"Invalid characters"}[e]},e.creditCardValidator=function(e){return e.value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/)?null:{invalidCreditCard:!0}},e.emailValidator=function(e){return e.value.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)||""==e.value?null:{invalidEmailAddress:!0}},e.alternateEmailValidator=function(e){return""==e.value?null:e.value.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)||""==e.value?null:{invalidEmailAddress:!0}},e.passwordValidator=function(e){},e.phoneNumberValidator=function(e){return e.value.match(/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i)&&10==e.value.length||""==e.value?null:{invalidPhoneNumber:!0}},e.zipCodeValidator=function(e){return e.value.match(/^[a-zA-Z0-9 ]*$/)?null:{invalidZipCode:!0}},e.NumberValidator=function(e){return e.value.match(/^[0-9 ]*$/)?null:{invalidOTP:!0}},e.mobileNumberValidator=function(e){return e.value.match(/^[7-9]{1}[0-9]{9}$/)?null:{invalidPhoneNumber:!0}},e.VINValidator=function(e){return 17==e.value.length?null:{invalidVIN:!0}},e.capacityValidator=function(e){return parseInt(e.value)>5500?{invalidCapacity:!0}:null},e.weightValidator=function(e){return parseInt(e.value)>250?{invalidWeight:!0}:null},e.patternValidator=function(e,t){return e.value.match(t)||""==e.value?null:{"invalid characters":!0}},e}()},XBTN:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("g5jc"),a=function(){function e(){this.alertPush=new i.b}return e.prototype.sendAlert=function(e){this.alertPush.next(e)},e.prototype.getAlert=function(){return this.alertPush.asObservable()},e}()},kZql:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={production:!0,API_ENDPOINT:"https://hippo-api.fuguchat.com/api/",FAYE_ENDPOINT:"https://api.fuguchat.com:3002/faye",SOCKET_ENDPOINT:"https://event.hippochat.io/",SOCKET_ENDPOINT_OLD:"https://socketv2.hippochat.io/",CHROME_EXTENSION_ID:"onnpnbcklmahhoajlilopflaandmlooa",CONFERENCE_URL:"https://conference.hippochat.io",AUTHENTICATION_KEY:"q4t7w!z%C*F-J@NcRfUjXn2r5u8x/A?D"}},p3n4:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("3j3K"),a=n("Fzro"),o=n("KdFd"),s=(n("owTz"),n("kZql")),r=n("zCXK"),c=n("l5y7"),u=n("Gvdl"),d=(n.n(u),this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}),l=(new o.g({"Content-Type":"application/x-www-form-urlencoded"}),function(){function e(e){this.http=e,this.currentLanguage="en",this.conversationDetails={},this.messageDetails={},this.messageBylabelDetails={},this.configFetchEvent=new i.p}return Object.defineProperty(e.prototype,"fuguWidgetData",{get:function(){return this._fuguWidgetData},set:function(e){this._fuguWidgetData=e},enumerable:!0,configurable:!0}),e.prototype.setCurrentLanguage=function(e){this.currentLanguage=e},e.prototype.getCurrentLanguage=function(){return this.currentLanguage},e.prototype.putUserDetails=function(e){e=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");var t=new a.d;return t.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(s.a.API_ENDPOINT+"users/putUserDetails",e.trim(),{headers:t}).map(function(e){return e.json()})},e.prototype.putUserDetailsReseller=function(e,t){t&&(e.neglect_conversations=t),e=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");var n=new a.d;return n.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(s.a.API_ENDPOINT+"reseller/putUserDetails",e.trim(),{headers:n}).map(function(e){return e.json()})},e.prototype.updateConversations=function(e,t,n,i,a,o){var r=this,u={access_token:e,channel_status:[1],page_offset:i,row_count:a,lang:this.currentLanguage};switch(o){case 0:u.fetch_my_chats=!0;break;case 1:u.fetch_p2p_chats=!0;break;case 2:u.fetch_o2o_chats=!0;break;default:u.fetch_my_chats=!0}return n&&(u.search_user_id=n),this.http.post(s.a.API_ENDPOINT+"conversation/v2/getConversations",u).pipe(Object(c.map)(function(e){var t=JSON.parse(e._body);return r.conversationDetails[o]=t,t})).toPromise()},e.prototype.updateSuppotChannelChats=function(e,t,n,i){var a=this,o={access_token:e,channel_status:[1],page_offset:t,row_count:n,lang:this.currentLanguage};return this.http.post(s.a.API_ENDPOINT+"conversation/getAgentSupportChannels",o).pipe(Object(c.map)(function(e){var t=JSON.parse(e._body);return a.conversationDetails[i]=t,t})).toPromise()},e.prototype.getConversationsCached=function(e,t,n,i,a,o){var r=this,d={access_token:e,channel_status:[1],page_offset:i,row_count:a,lang:this.currentLanguage};switch(o){case 0:d.fetch_my_chats=!0;break;case 1:d.fetch_p2p_chats=!0;break;case 2:d.fetch_o2o_chats=!0;break;default:d.fetch_my_chats=!0}return n&&(d.search_user_id=n),this.conversationDetails[o]&&"object"==typeof this.conversationDetails[o]?new u.Observable(function(s){s.next(r.conversationDetails[o]),r.updateConversations(e,t,n,i,a,o).then(function(e){s.next(Object.assign({},e,{updateMode:!0}))})}):this.http.post(s.a.API_ENDPOINT+"conversation/v2/getConversations",d).pipe(Object(c.map)(function(e){var t=JSON.parse(e._body);return r.conversationDetails[o]=t,Object.assign({},t,{initialMode:!0})}))},e.prototype.getSupportChannelCached=function(e,t,n,i){var a=this,o={access_token:e,channel_status:[1],page_offset:t,row_count:n,lang:this.currentLanguage};return this.conversationDetails[i]&&"object"==typeof this.conversationDetails[i]?new u.Observable(function(o){o.next(a.conversationDetails[i]),a.updateSuppotChannelChats(e,t,n,i).then(function(e){o.next(Object.assign({},e,{updateMode:!0}))})}):this.http.post(s.a.API_ENDPOINT+"conversation/getAgentSupportChannels",o).pipe(Object(c.map)(function(e){var t=JSON.parse(e._body);return a.conversationDetails[i]=t,Object.assign({},t,{initialMode:!0})}))},e.prototype.getMessagesWithCaching=function(e,t,n){var i=this,a=e+"-"+t,o={access_token:n.access_token,channel_id:n.channelId,en_user_id:n.user_id,page_start:n.page_start,lang:this.currentLanguage};return this.messageDetails[a]&&"object"==typeof this.messageDetails[a]?new u.Observable(function(o){o.next(i.messageDetails[a]),i.updateMessages(e,t,n).then(function(e){var t=JSON.parse(e._body);o.next(Object.assign({},{updateMode:!0},t))})}):this.http.post(s.a.API_ENDPOINT+"conversation/getMessages",o).pipe(Object(c.map)(function(e){i.messageDetails[a]=JSON.parse(e._body);var t=JSON.parse(e._body);return Object.assign({},{initialMode:!0},t)}))},e.prototype.insertFirstMessage=function(e,t){this.messageDetails[e]&&this.messageDetails[e].data&&this.messageDetails[e].data.messages&&Array.isArray(this.messageDetails[e].data.messages)&&(0==this.messageDetails[e].data.messages.length?t&&t.muid&&this.messageDetails[e].data.messages.push(t):1==this.messageDetails[e].data.messages.length&&t&&t.muid&&this.messageDetails[e].data.messages[0]&&this.messageDetails[e].data.messages[0].muid!=t.muid&&this.messageDetails[e].data.messages.push(t))},e.prototype.updateMessages=function(e,t,n){var i=this,a=e+"-"+t,o={access_token:n.access_token,channel_id:n.channelId,en_user_id:n.user_id,page_start:n.page_start,lang:this.currentLanguage};return this.http.post(s.a.API_ENDPOINT+"conversation/getMessages",o).pipe(Object(c.map)(function(e){return i.messageDetails[a]=JSON.parse(e._body),e})).toPromise()},e.prototype.getGroupingTags=function(e){return e.length?e.map(function(e){return{reseller_team_id:e.toString()}}):[]},e.prototype.agentLoginViaAuthToken=function(e){var t={auth_token:this.fuguWidgetData.access_token,fetch_chat_filters:0,fetch_tags:0,lang:this.currentLanguage,attributes:{current_url:e||""}};return this.fuguWidgetData&&this.fuguWidgetData.device_type&&this.fuguWidgetData.app_type&&this.fuguWidgetData.device_token&&(t.device_type=this.fuguWidgetData.device_type,t.device_token=this.fuguWidgetData.device_token,t.app_type=this.fuguWidgetData.app_type),this.fuguWidgetData&&this.fuguWidgetData.app_version_code&&this.fuguWidgetData.app_version&&(t.app_version_code=this.fuguWidgetData.app_version_code,t.app_version=this.fuguWidgetData.app_version),this.fuguWidgetData&&this.fuguWidgetData.customAttributes&&(t.custom_attributes=this.fuguWidgetData.customAttributes||{},t.device_id=localStorage.getItem("device_uuid")),this.http.post(s.a.API_ENDPOINT+"agent/v1/agentLoginViaAuthToken",t).map(function(e){return JSON.parse(e._body)})},e.prototype.agentLoginViaSecretKey=function(){var e={agent_secret_key:this.fuguWidgetData.agent_secret_key,fetch_chat_filters:0,fetch_tags:0,lang:this.currentLanguage};return this.http.post(s.a.API_ENDPOINT+"agent/getAgentLoginInfo",e).map(function(e){return JSON.parse(e._body)})},e.prototype.getConfigurations=function(e){var t={access_token:e,lang:this.currentLanguage};return this.http.post(s.a.API_ENDPOINT+"business/getConfiguration",t).map(function(e){return JSON.parse(e._body)})},e.prototype.authenticateViaAccessToken=function(e){var t={access_token:e,device_id:localStorage.getItem("device_uuid"),lang:this.currentLanguage};return this.fuguWidgetData&&this.fuguWidgetData.device_type&&this.fuguWidgetData.app_type&&this.fuguWidgetData.device_token&&(t.device_type=this.fuguWidgetData.device_type,t.device_token=this.fuguWidgetData.device_token,t.app_type=this.fuguWidgetData.app_type),this.fuguWidgetData&&this.fuguWidgetData.app_version_code&&this.fuguWidgetData.app_version&&(t.app_version_code=this.fuguWidgetData.app_version_code,t.app_version=this.fuguWidgetData.app_version),this.fuguWidgetData&&this.fuguWidgetData.customAttributes&&(t.custom_attributes=this.fuguWidgetData.customAttributes||{}),this.http.post(s.a.API_ENDPOINT+"agent/agentLogin",t).map(function(e){return JSON.parse(e._body)})},e.prototype.getUnreadCount=function(e,t){if(this.fuguWidgetData.user_unique_keys){var n={access_token:this.fuguWidgetData.access_token,lang:this.currentLanguage};return e.length&&(n.user_unique_keys=e),t&&(n.neglect_total_unread_count=!0),this.http.post(s.a.API_ENDPOINT+"conversation/getUnreadCount",n).map(function(e){return JSON.parse(e._body)})}},e.prototype.findIP=function(){var e=new a.d;return e.append("Content-Type","application/x-www-form-urlencoded"),this.http.get("https://jsonip.com",{headers:e}).map(function(e){return e.json()})},e.prototype.getConversations=function(e,t,n,i,a,o){var r={access_token:e,channel_status:[1],page_offset:i,row_count:a,lang:this.currentLanguage};switch(o){case 0:r.fetch_my_chats=!0;break;case 1:r.fetch_p2p_chats=!0;break;case 2:r.fetch_o2o_chats=!0;break;default:r.fetch_my_chats=!0}return n&&(r.search_user_id=n),this.http.post(s.a.API_ENDPOINT+"conversation/v2/getConversations",r).map(function(e){return JSON.parse(e._body)})},e.prototype.getSupportChannel=function(e,t,n,i){var a={access_token:e,channel_status:[1],page_offset:t,row_count:n,lang:this.currentLanguage};return this.http.post(s.a.API_ENDPOINT+"conversation/getAgentSupportChannels",a).map(function(e){return JSON.parse(e._body)})},e.prototype.getMessages=function(e){var t={access_token:e.access_token,channel_id:e.channelId,en_user_id:e.user_id,page_start:e.page_start,lang:this.currentLanguage};return this.http.post(s.a.API_ENDPOINT+"conversation/getMessages",t).map(function(e){return JSON.parse(e._body)})},e.prototype.adminToUserChat=function(e){return this.http.post(s.a.API_ENDPOINT+"conversation/createConversation",e).map(function(e){return JSON.parse(e._body)})},e.prototype.createOneToOneChat=function(e,t){var n={access_token:e,lang:this.currentLanguage};return t.email?n.chat_with_email=t.email:t.user_id&&(n.chat_with_user_id=t.user_id),this.http.post(s.a.API_ENDPOINT+"chat/createOneToOneChat",n).map(function(e){return JSON.parse(e._body)})},e.prototype.createOneToOneChatV2=function(e,t){var n={};return n=t&&t.initiatedByMerchant?{access_token:e,lang:this.currentLanguage,transaction_id:t.transactionId}:{access_token:e,lang:this.currentLanguage,initiated_by_agent:1,transaction_id:t.transactionId,other_user_email:t.email},t.groupingTags&&(n.grouping_tags=t.groupingTags),this.http.post(s.a.API_ENDPOINT+"conversation/createAgentSupportChannel",n).map(function(e){return JSON.parse(e._body)})},e.prototype.createConversation=function(e,t,n){var i=new a.d,o="app_secret_key="+encodeURIComponent(this.fuguWidgetData.appSecretKey)+"&label_id="+e+"&en_user_id="+t+"&source=4";if(o=o+"&lang="+this.currentLanguage,n&&Object.keys(n)){if(n.tags&&n.tags.length){var r=n.tags.map(function(e){return e.toString()});o+="&tags="+JSON.stringify(r)}if(n.custom_label&&(o+="&custom_label="+n.custom_label),n.transaction_id&&(o+="&transaction_id="+n.transaction_id),n.user_unique_key&&(o+="&user_unique_key="+n.user_unique_key),n.other_user_unique_key){var c=n.tags.map(function(e){return e.toString()});o+="&other_user_unique_key="+JSON.stringify(c)}n.chat_type&&(o+="&chat_type="+n.chat_type)}return i.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(s.a.API_ENDPOINT+"conversation/createConversation",o,{headers:i}).map(function(e){return e.json()})},e.prototype.uploadfileAWSS3=function(e,t,n){var i=new a.d;return i.append("Content-Type","binary/octet-stream"),this.http.put(e,n,{headers:i}).pipe(Object(c.map)(function(e){return e}))},e.prototype.getPresignedURL=function(e){return this.http.post(s.a.API_ENDPOINT+"conversation/getUploadFile",e).map(function(e){return JSON.parse(e._body)})},e.prototype.logOutUser=function(e){var t=new a.d;return t.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(s.a.API_ENDPOINT+"users/userlogout",e,{headers:t}).map(function(e){return e.json()})},e.prototype.newConversationWithBotMessage=function(e,t){var n=new a.d,i=this.fuguWidgetData.tags,o="app_secret_key="+encodeURIComponent(this.fuguWidgetData.appSecretKey)+"&chat_type=0&en_user_id="+e+"&bot_default_message="+t;return o=o+"&lang="+this.currentLanguage,i&&(o+="&tags="+JSON.stringify(i)),n.append("Content-Type","application/x-www-form-urlencoded"),this.http.post(s.a.API_ENDPOINT+"conversation/createConversation",o,{headers:n}).map(function(e){return e.json()})},e.prototype.receiveBotAction=function(e){var t=new a.d;return this.http.post(s.a.API_ENDPOINT+"bot/receiveBotAction",e,{headers:t}).map(function(e){return e.json()})},e.prototype.getWhitelabelInfo=function(e){return this.http.get(s.a.API_ENDPOINT+"business/whitelabelProperties?url="+e).map(function(e){return e.json()})},e.prototype.sendFCMToken=function(e,t,n){var i={access_token:this.fuguWidgetData.access_token,business_id:this.fuguWidgetData.businessId,en_user_id:t.en_user_id,web_token:e,device_id:localStorage.getItem("device_uuid"),device_details:JSON.stringify(n),device_type:3,lang:this.currentLanguage};return this.http.post(s.a.API_ENDPOINT+"agent/editInfo",i).toPromise()},e.prototype.editAgentLanguage=function(e,t){var n={access_token:this.fuguWidgetData.access_token,lang_code:t,en_user_id:e&&e.en_user_id,device_id:localStorage.getItem("device_uuid")};return this.http.post(s.a.API_ENDPOINT+"agent/editInfo",n).map(function(e){return e}).toPromise()},e.prototype.deleteOrEditMessage=function(e){var t={access_token:this.fuguWidgetData.access_token,channel_id:e&&e.channelId,message_muid:e&&e.messageMuid,task_status:e&&e.taskStatus,lang:this.currentLanguage};return e&&e.taskStatus==r.n.EDIT&&(t.new_message=e.newMessage),this.http.post(s.a.API_ENDPOINT+"conversation/deleteOrEditMessage",t).toPromise()},e.prototype.createGroupCallChannelDetails=function(e){return this.http.post(s.a.API_ENDPOINT+"conversation/createGroupCallChannel",e).map(function(e){return JSON.parse(e._body)})},e.prototype.getGroupCallChannelDetails=function(e){return this.http.post(s.a.API_ENDPOINT+"conversation/getGroupCallChannelDetails",e).map(function(e){return JSON.parse(e._body)})},e.prototype.getPaymentPlans=function(e){var t={access_token:this.fuguWidgetData.access_token};return t=d({},e,t),this.http.post(s.a.API_ENDPOINT+"agent/getPaymentPlans",t).map(function(e){return JSON.parse(e._body)})},e.prototype.editPaymentPlans=function(e){var t={access_token:this.fuguWidgetData.access_token};return t=d({},e,t),this.http.post(s.a.API_ENDPOINT+"agent/editPaymentPlans",t).map(function(e){return JSON.parse(e._body)})},e.prototype.sendPaymentUrl=function(e){return e.access_token=this.fuguWidgetData.access_token,this.http.post(s.a.API_ENDPOINT+"payment/sendPaymentUrl",e).map(function(e){return JSON.parse(e._body)})},e.prototype.getAnnouncemens=function(e){return e.lang=this.currentLanguage,this.http.post(s.a.API_ENDPOINT+"broadcast/getAnnouncements",e).pipe(Object(c.map)(function(e){return JSON.parse(e._body)}))},e.prototype.clearAnnouncemens=function(e){return e.lang=this.currentLanguage,this.http.post(s.a.API_ENDPOINT+"broadcast/clearAnnouncements",e).pipe(Object(c.map)(function(e){return JSON.parse(e._body)}))},e.ctorParameters=function(){return[{type:a.e}]},e}())},x35b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n("3j3K"),o=n("kZql"),s=n("Qbdm"),r=n("obU/"),c=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function u(e){return new r.a(e,"assets/multilingual/",".json")}var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.overrides={pinch:{enable:!1},rotate:{enable:!1}},t}return c(t,e),t}(s.g),l=function(){return function(){}}(),g=n("5oXY"),h=n("+KvB"),_=n("p3n4"),p=n("zCXK"),m=n("5QFO"),f=n("yviF"),v=(n("h+EP"),n("8A5H")),S=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},C="AUDIO",y="VIDEO",b=function(){function e(e,t,n,i,a){var o=this;this.router=e,this.commonService=t,this.translate=n,this.fuguWidgetService=i,this.socketIoService=a,this.closedFromChat=!1,this.debug=!1,this._collpased=!0,this.alive=!0,this.previousRoute="conversations",this.translate.setDefaultLang("en"),this.translate.addLangs(this.commonService.language_array),window&&window.location&&window.location.href&&(window.location.href.endsWith("#/newcall")||window.location.href.endsWith("#/conference"))||(this.firebaseInit(),this.commonService.showNotificationsConfirmationEvent.subscribe(function(e){e&&o.openPermissionFrame()}),window.addEventListener("message",function(e){if(e.data)switch(e.data.type){case"permission-allowed":e.data.data&&o.firebaseUpdate()}}))}return Object.defineProperty(e.prototype,"collapsed",{get:function(){return this._collpased},set:function(e){this._collpased=e,e?this.router.navigate(["conversations",{closedFromChat:this.closedFromChat}],{skipLocationChange:!0}):this.commonService.isConversationListValid?this.router.navigate([this.previousRoute],{skipLocationChange:!0}):this.router.navigate(["conversations"],{skipLocationChange:!0})},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;window&&window.location&&window.location.href&&(window.location.href.endsWith("#/newcall")||window.location.href.endsWith("#/conference"))||(this.fuguWidgetService.findIP().takeWhile(function(){return e.alive}).subscribe(function(t){console.log("Your ip: "+t.ip),e.commonService.ip=t.ip},function(e){console.log("get ip error")}),this.fuguWidgetService.configFetchEvent.takeWhile(function(){return e.alive}).subscribe(function(t){e.commonService.updateConfigDetails(t.data),e.fuguWidgetService.fuguWidgetData.color&&(t.data["color-theme"]=e.fuguWidgetService.fuguWidgetData.color),e.commonService.postMessageToParentWindow({type:"Config",data:t.data}),document.documentElement.style.setProperty("--color",t.data["color-theme"])}),window.app=this)},e.prototype.onWindowOffline=function(e){if(e.data.type&&e.origin==e.data.parent_origin)switch(this.commonService.parentOrigin=e.data.parent_origin,this.commonService.currentUrl=e.data.current_url,o.a.production&&!this.debug||console.log("ng-App-Hostlistener: ",e),e.data.type){case"Expand":this.collapsed=!1,this.commonService.is_collapsed=!1;break;case"Collapse":e.data&&e.data.data&&e.data.data.closedFromChat?this.closedFromChat=!0:this.closedFromChat=!1,this.collapsed=!0,this.commonService.is_collapsed=!0;break;case"Init":if(this.fuguWidgetService.fuguWidgetData=e.data.data,this.commonService.hostname=e.data.hostname,e&&e.data&&e.data.data&&e.data.data.deviceId&&(localStorage.setItem("device_uuid",e.data.data.deviceId),this.commonService.deviceIdFromParent=e.data.data.deviceId),this.getSelectedLanguage(),this.fuguWidgetService.fuguWidgetData.customWhitelabelPointing){var t=new URL(this.commonService.currentUrl);o.a.API_ENDPOINT=t.origin+"/widget/api/",o.a.FAYE_ENDPOINT=t.origin+"/widget/faye"}this.fuguWidgetService.fuguWidgetData.is_fork?this.initForkedAgentWidget():this.initAgentWidget();break;case"Shutdown":this.socketIoService.unsubscribeAllSubscriptions(!0),this.commonService.userLogout(e.data.data.hostname);break;case"OpenNotifications":this.openAnnouncementScreen(e.data.data.data||e.data.data);break;case"StartConversation":this.createUniqueConversation(e.data.data.data||e.data.data);break;case"StartPeerToPeerConversation":this.createPeerToPeerConversation(e.data.data.data||e.data.data);break;case"ConfigCompleted":this.commonService.postMessageToParentWindow({type:"SetupComplete",data:{}});break;case"Blur":this.commonService.iPadState=!1;break;case"BotMessage":this.newConversationWithBotMessage(e.data.data);break;case"OpenConversation":this.fuguWidgetService.fuguWidgetData=S({},this.fuguWidgetService.fuguWidgetData,e.data.data),this.commonService.postMessageToParentWindow({type:"Expand",data:{}}),this.openCustomerConversation();break;case"OpenMyConversation":this.commonService.postMessageToParentWindow({type:"Expand",data:{}}),this.commonService.openAgentConversations.emit();break;case"NewCustomerOnline":this.onNewCustomer(e.data.data);break;case"StartOneToOneChat":this.startOneToOneChat(e.data.data.data);break;case"StartOneToOneChatV2":this.startOneToOneChatV2(e.data.data.data);break;case"StartChatWithCustomer":this.startChatWithCustomer(e.data.data.data);break;case"InitHippoConference":this.initHippoConference(e.data.data.data||e.data.data);break;case"StartHippoConference":this.startHippoConference(e.data.data.data||e.data.data);break;case"CloseHippoConference":e.data.data=e.data.data.data||e.data.data,e.data.data&&e.data.data.close&&(e.data.data.payload&&this.commonService.conferenceTransactionId==e.data.data.payload.transaction_id&&(this.removeRoomData(e.data.data.payload.transaction_id),this.commonService.hippoPanelCloseConferenceEvent(),e.data.data.payload.send_end_conference&&this.commonService.endGroupCallEvent.next(!0)),o.a.production||console.log("close event---",e));break;case"InitHippoLanguage":if(e.data&&e.data.data&&e.data.data.data&&e.data.data.data.language){var n=e.data.data.data.language;this.commonService.checkLanguageAcceptance(n)&&(this.commonService.changeComponentLanguage(n),this.fuguWidgetService.setCurrentLanguage(n),this.currentLanguage=n,n!=this.fuguWidgetService.getCurrentLanguage()&&this.fuguWidgetService.editAgentLanguage(this.commonService.userDetails,this.fuguWidgetService.getCurrentLanguage()).then(function(e){}).catch(function(e){}))}}},e.prototype.openAnnouncementScreen=function(e){var t=this;e&&"1"==e.fetchAnnouncents&&setTimeout(function(){t.router.navigate(["announcements"])},300)},e.prototype.getSelectedLanguage=function(){if(this.fuguWidgetService.fuguWidgetData.language){var e=this.fuguWidgetService.fuguWidgetData.language;this.commonService.checkLanguageAcceptance(e)?(this.commonService.changeComponentLanguage(e),this.translate.setDefaultLang(e),this.currentLanguage=e,this.fuguWidgetService.setCurrentLanguage(e)):(this.translate.setDefaultLang("en"),this.fuguWidgetService.setCurrentLanguage("en"))}else this.translate.setDefaultLang("en"),this.fuguWidgetService.setCurrentLanguage("en")},e.prototype.removeRoomData=function(e){var t={};try{if(localStorage.getItem("conferenceRoomData")){var n=JSON.parse(localStorage.getItem("conferenceRoomData"));Object.keys(n).length>50&&(n={}),n&&"object"==typeof n&&(t=n)}delete t[e]}catch(e){t={}}try{localStorage.setItem("conferenceRoomData",JSON.stringify(Object.assign({},t)))}catch(e){console.warn(e)}},e.prototype.startHippoConference=function(e){if(e&&"object"==typeof e)if(e.transaction_id){var t=this.fuguWidgetService.getCurrentLanguage()||"en",n=this.commonService.userDetails&&this.commonService.userDetails.user_channel||"",i=this.commonService.userDetails&&this.commonService.userDetails.user_id||"",a=this.commonService.userDetails&&this.commonService.userDetails.en_user_id||"",o=this.commonService.userDetails&&this.commonService.userDetails.full_name||"",s=this.commonService.userDetails&&this.commonService.userDetails.agent_type||"",r=this.fuguWidgetService.fuguWidgetData&&this.fuguWidgetService.fuguWidgetData.access_token||"",c=e.transaction_id||"",u=e.is_video_muted||0;this.commonService.setUserData();var d=window.location.origin+window.location.pathname+"#/openconference/"+t+"/"+r+"/"+i+"/"+a+"/"+c+"/"+n+"/"+s+"/"+o+"/"+u;this.commonService.postMessageToParentWindow({type:"JoinHippoConferenceEvent",data:{href:d}}),this.commonService.conferenceTransactionId=e.transaction_id}else console.log("No transaction ID"),this.commonService.postMessageToParentWindow({type:"CloseHippoConferenceEvent",data:{close:1}})},e.prototype.initHippoConference=function(e){var t=this;if(e&&"object"==typeof e){var n={lang:this.fuguWidgetService.getCurrentLanguage()||"en",access_token:this.fuguWidgetService.fuguWidgetData&&this.fuguWidgetService.fuguWidgetData.access_token||"",room_title:e.room_title||"",agent_email:e.room_title||"",session_start_time:e.session_start_time||"",session_end_time:e.session_end_time||"",user_id:this.commonService.userDetails&&this.commonService.userDetails.user_id||"",en_user_id:this.commonService.userDetails&&this.commonService.userDetails.en_user_id||"",call_type:1==e.is_video_muted?C:y,user_unique_ids:e.user_unique_ids||"",transaction_id:e.transaction_id||""};e&&e.transaction_id&&this.commonService.openConferenceEvent.next(e.transaction_id),this.fuguWidgetService.createGroupCallChannelDetails(n).subscribe(function(e){t.commonService.postMessageToParentWindow({type:"InitHippoConferenceComplete",data:e})},function(e){console.log(e)})}},e.prototype.createPeerToPeerConversation=function(e){var t=this,n=JSON.parse(JSON.stringify(e));n.chat_type=p.c.p2p,n.en_user_id=this.commonService.userDetails.en_user_id,this.fuguWidgetService.createConversation(-1,this.commonService.userDetails.en_user_id,n).takeWhile(function(){return t.alive}).subscribe(function(e){var n=e.data.channel_id;t.router.navigate(["chat/"+n],{queryParams:{label_id:-1},skipLocationChange:!0})},function(e){console.log("createConversation: ",e.json())})},e.prototype.startOneToOneChat=function(e){var t=this;if(void 0===e.user_id&&void 0===e.email)throw new Error("Neither email nor userid provided");this.fuguWidgetService.createOneToOneChat(this.fuguWidgetService.fuguWidgetData.access_token,e).subscribe(function(e){var n=e.data.channel_id;t.router.navigate(["chat/"+n],{queryParams:{label_id:-1},skipLocationChange:!0})},function(e){console.log("createOneToOneChat Error: ",e.json())})},e.prototype.startOneToOneChatV2=function(e){var t=this;if(!e.initiatedByMerchant&&void 0===e.email||void 0===e.transactionId||void 0===e.groupingTags)throw new Error("Invalid Params");this.fuguWidgetService.createOneToOneChatV2(this.fuguWidgetService.fuguWidgetData.access_token,e).subscribe(function(e){var n=e.data.channel_id;t.router.navigate(["chat/"+n],{queryParams:{label_id:-1},skipLocationChange:!0})},function(e){console.log("createOneToOneChat Error: ",e.json())})},e.prototype.startChatWithCustomer=function(e){var t=this;if(void 0===e.customer_unique_keys)throw new Error("No user id provided");if(void 0===e.transaction_id)throw new Error("No transaction id provided");var n={access_token:this.commonService.userDetails.access_token,initiator_en_agent_id:this.commonService.userDetails.en_user_id,other_user_unique_key:e.customer_unique_keys,transaction_id:e.transaction_id,chat_type:0};e.custom_label&&(n.custom_label=e.custom_label),this.fuguWidgetService.adminToUserChat(n).takeWhile(function(){return t.alive}).subscribe(function(e){var n=e.data.channel_id;t.router.navigate(["chat/"+n],{queryParams:{label_id:-1},skipLocationChange:!0})},function(e){console.log("create new conversation error")})},e.prototype.createUniqueConversation=function(e){var t=this,n=JSON.parse(JSON.stringify(e));n.custom_label?n.custom_label:this.commonService.userDetails.business_name,n.transaction_id||this.commonService.userDetails.user_id||!n.defaultMessage?n.transaction_id&&this.commonService.userDetails.user_id&&this.fuguWidgetService.createConversation(-1,this.commonService.userDetails.en_user_id,n).takeWhile(function(){return t.alive}).subscribe(function(e){var i=e.data.channel_id;return n.defaultMessage?(t.commonService.defaultMessageToPublish=n.defaultMessage,n.singleDefaultMessage?t.router.navigate(["chat/"+i],{queryParams:{label_id:-1,publish_message:!0,publish_once:!0},skipLocationChange:!0}):t.router.navigate(["chat/"+i],{queryParams:{label_id:-1,publish_message:!0},skipLocationChange:!0})):t.router.navigate(["chat/"+i],{queryParams:{label_id:-1,publish_message:!1},skipLocationChange:!0})},function(e){console.log("createConversation: ",e.json())}):this.fuguWidgetService.createConversation(-1,this.commonService.userDetails.en_user_id,n).takeWhile(function(){return t.alive}).subscribe(function(e){var n=e.data.channel_id;t.router.navigate(["chat/"+n],{queryParams:{label_id:-1},skipLocationChange:!0})},function(e){console.log("createConversation: ",e.json())})},e.prototype.newConversationWithBotMessage=function(e){var t=this;this.fuguWidgetService.newConversationWithBotMessage(this.commonService.userDetails.en_user_id,e).subscribe(function(n){t.commonService.newConversationInitiated.emit({message:e}),t.agentLoginViaAuthToken()},function(e){console.log(e.json())})},e.prototype.onNewCustomer=function(e){var t=this;this.fuguWidgetService.getUnreadCount(e,!0).subscribe(function(e){var n=e.data.agent_customer_unread_count;Object.keys(n).map(function(e){var i=0;Object.keys(n[e]).map(function(a){i+=n[e][a],-1==t.commonService.channelwiseUnreadCount[a].customersInvolved.indexOf(e)&&t.commonService.channelwiseUnreadCount[a].customersInvolved.push(e)}),t.commonService.customerwiseUnreadCount[e]=i}),t.commonService.postMessageToParentWindow({type:"UnreadCount",data:t.commonService.customerwiseUnreadCount})})},e.prototype.agentLoginViaAuthToken=function(){var e=this;if(this.fuguWidgetService.fuguWidgetData.access_token){this.fuguWidgetService.fuguWidgetData.customer_info=this.fuguWidgetService.fuguWidgetData.customer_info?this.fuguWidgetService.fuguWidgetData.customer_info:{};var t=!!this.fuguWidgetService.fuguWidgetData.businessKey;this.router.navigate(["/conversations"]),this.fuguWidgetService.agentLoginViaAuthToken(this.commonService.currentUrl).takeWhile(function(){return e.alive}).subscribe(function(n){n&&n.data&&n.data.business_property&&n.data.business_property.jitsi_url&&(e.commonService.jitsiUrl=n.data.business_property.jitsi_url),n.data&&n.data.updateAt&&!isNaN(n.data.updateAt)&&e.commonService.updateTimeDifference(n.data.updateAt).then(function(e){}).catch(function(e){console.warn(e)});var i=n.data.access_token,a=n.data.user_id,o=n.data.full_name;e.commonService.userDetails.access_token=i,e.commonService.userDetails.customer_id=a,e.commonService.userDetails.en_user_id=n.data.en_user_id,e.commonService.userDetails.searched_full_name=o,e.fuguWidgetService.getConfigurations(i).takeWhile(function(){return e.alive}).subscribe(function(t){console.log(t),e.fuguWidgetService.configFetchEvent.emit(t);try{e.firebasePermission()}catch(e){console.log(e)}},function(e){console.log("get config error: ",e.json())});var s=n.data.conversations||null;e.fuguWidgetService.authenticateViaAccessToken(i).takeWhile(function(){return e.alive}).subscribe(function(n){t&&(e.fuguWidgetService.fuguWidgetData.appSecretKey=n.data.app_secret_key),e.commonService.updateUserDetails(n.data),e.socketIoService.setupSocketConnection(),s&&200==s.statusCode&&s.data&&s.data.conversation_list.length?(e.commonService.customerConversations=s.data.conversation_list,e.commonService.customeConversationsChanged.emit()):e.router.navigate(["/chat/-1"],{queryParams:{customer_id:a}})},function(e){console.log("agent login error: ",e.json())})})}},e.prototype.checkArrowPosition=function(e){console.log("pos"+JSON.stringify(e.data));var t=document.getElementById("arrow");t.style.borderLeft=null,t.style.borderRight=null,t.style.borderTop=null,t.style.borderBottom=null;var n=e.data.clientHeight-110<553?e.data.clientHeight-110:553;e.data.y_coordinate+n>e.data.clientHeight?(console.log("posleft"),t.style.borderTop="10px solid transparent",t.style.borderBottom="10px solid transparent",t.style.borderLeft="10px solid green",t.style.top="10px",t.style.right="0px"):e.data.clientHeight-e.data.y_coordinate>n?console.log("sasa"):e.data.clientHeight-e.data.y_coordinate>e.data.y_coordinate?(console.log("posbottom"),t.style.borderLeft="10px solid transparent",t.style.borderRight="10px solid transparent",t.style.borderTop="10px solid green",t.style.top=n+10+"px",t.style.right="185px"):(console.log("postop"),t.style.borderLeft="10px solid transparent",t.style.borderRight="10px solid transparent",t.style.borderBottom="10px solid green")},e.prototype.initAgentWidget=function(){var e=this;this.fuguWidgetService.fuguWidgetData.access_token&&this.fuguWidgetService.agentLoginViaAuthToken(this.commonService.currentUrl).takeWhile(function(){return e.alive}).subscribe(function(t){if(e.commonService.postMessageToParentWindow({type:"AccessTokenEvent",data:t.data.access_token}),t.data&&t.data.updateAt&&!isNaN(t.data.updateAt)&&e.commonService.updateTimeDifference(t.data.updateAt).then(function(n){e.setupFayeAndGetUnreadCount(t)}).catch(function(e){console.warn(e)}),e.fuguWidgetService.fuguWidgetData.dashboard_url&&e.getWhitelabelDetails(),e.fuguWidgetService.fuguWidgetData.language)e.commonService.checkLanguageAcceptance(e.fuguWidgetService.fuguWidgetData.language)?t.data.lang_code!=e.fuguWidgetService.getCurrentLanguage()&&e.fuguWidgetService.editAgentLanguage(e.commonService.userDetails,e.fuguWidgetService.getCurrentLanguage()).then(function(e){}).catch(function(e){}):e.commonService.checkLanguageAcceptance(t.data.lang_code)&&(e.commonService.changeComponentLanguage(t.data.lang_code),e.translate.setDefaultLang(t.data.lang_code),e.fuguWidgetService.setCurrentLanguage(t.data.lang_code),e.currentLanguage=t.data.lang_code);else{var n=t.data.lang_code;e.commonService.checkLanguageAcceptance(n)&&(e.commonService.changeComponentLanguage(n),e.translate.setDefaultLang(n),e.currentLanguage=n,e.fuguWidgetService.setCurrentLanguage(n))}t&&t.data&&t.data.business_property&&t.data.business_property.jitsi_url&&(e.commonService.jitsiUrl=t.data.business_property.jitsi_url)})},e.prototype.initForkedAgentWidget=function(){var e=this;this.fuguWidgetService.fuguWidgetData.agent_secret_key&&this.fuguWidgetService.agentLoginViaSecretKey().takeWhile(function(){return e.alive}).subscribe(function(t){if(t.data&&t.data.updateAt&&!isNaN(t.data.updateAt)&&e.commonService.updateTimeDifference(t.data.updateAt).then(function(n){e.setupFayeAndGetUnreadCount(t)}).catch(function(e){console.warn(e)}),e.commonService.postMessageToParentWindow({type:"AccessTokenEvent",data:t.data.access_token}),e.fuguWidgetService.fuguWidgetData.dashboard_url&&e.getWhitelabelDetails(),e.fuguWidgetService.fuguWidgetData.language)e.commonService.checkLanguageAcceptance(e.fuguWidgetService.fuguWidgetData.language)?(e.commonService.changeComponentLanguage(t.data.lang_code),e.translate.setDefaultLang(t.data.lang_code),e.fuguWidgetService.setCurrentLanguage(t.data.lang_code),e.currentLanguage=t.data.lang_code,t.data.lang_code!=e.fuguWidgetService.getCurrentLanguage()&&e.fuguWidgetService.editAgentLanguage(e.commonService.userDetails,e.fuguWidgetService.getCurrentLanguage()).then(function(e){}).catch(function(e){})):e.commonService.checkLanguageAcceptance(t.data.lang_code)&&(e.commonService.changeComponentLanguage(t.data.lang_code),e.translate.setDefaultLang(t.data.lang_code),e.fuguWidgetService.setCurrentLanguage(t.data.lang_code),e.currentLanguage=t.data.lang_code);else{var n=t.data.lang_code;e.commonService.checkLanguageAcceptance(n)&&(e.commonService.changeComponentLanguage(n),e.translate.setDefaultLang(n),e.currentLanguage=n,e.fuguWidgetService.setCurrentLanguage(n))}t&&t.data&&t.data.business_property&&t.data.business_property.jitsi_url&&(e.commonService.jitsiUrl=t.data.business_property.jitsi_url)})},e.prototype.setupFayeAndGetUnreadCount=function(e){var t=this,n=e.data.access_token;this.fuguWidgetService.fuguWidgetData.access_token=n,this.fuguWidgetService.fuguWidgetData.businessId=e.data.business_id,this.fuguWidgetService.fuguWidgetData.appSecretKey=e.data.app_secret_key,this.commonService.userDetails.access_token=n,this.commonService.userDetails.en_user_id=e.data.en_user_id,e.data.business_property&&(this.commonService.is_audio_call_enabled=e.data.business_property.is_audio_call_enabled,this.commonService.is_video_call_enabled=e.data.business_property.is_video_call_enabled,this.commonService.o2o_in_dashboard_enabled=e.data.business_property.o2o_in_dashboard_enabled,this.commonService.p2p_in_dashboard_enabled=e.data.business_property.p2p_in_dashboard_enabled,this.commonService.agent_support_in_dashboard_enabled=e.data.business_property.agent_support_in_dashboard_enabled),this.fuguWidgetService.getConfigurations(n).takeWhile(function(){return t.alive}).subscribe(function(e){t.fuguWidgetService.configFetchEvent.emit(e);try{t.firebasePermission()}catch(e){console.log(e)}},function(e){console.log("get config error: ",e.json())}),this.commonService.updateUserDetails(e.data),this.socketIoService.setupSocketConnection(),this.fuguWidgetService.fuguWidgetData.user_unique_keys&&this.fuguWidgetService.getUnreadCount(this.fuguWidgetService.fuguWidgetData.user_unique_keys).subscribe(function(e){var n=e.data.agent_customer_unread_count,i=e.data.total_unread_count;Object.keys(i).length&&Object.keys(i).map(function(e){t.commonService.channelwiseUnreadCount[e]={},t.commonService.channelwiseUnreadCount[e].customersInvolved=[],t.commonService.channelwiseUnreadCount[e].unreadCount=i[e],t.commonService.totalUnreadCount+=i[e]}),Object.keys(n).length&&Object.keys(n).map(function(e){var i=0;Object.keys(n[e]).map(function(a){i+=n[e][a],-1==t.commonService.channelwiseUnreadCount[a].customersInvolved.indexOf(e)&&t.commonService.channelwiseUnreadCount[a].customersInvolved.push(e)}),t.commonService.customerwiseUnreadCount[e]=i}),t.commonService.postMessageToParentWindow({type:"UnreadCount",data:t.commonService.customerwiseUnreadCount}),t.commonService.postMessageToParentWindow({type:"TotalUnreadCount",data:t.commonService.totalUnreadCount})})},e.prototype.openCustomerConversation=function(){this.fuguWidgetService.fuguWidgetData.access_token&&this.commonService.customerChatClicked.emit()},e.prototype.ngOnDestroy=function(){this.alive=!1},e.prototype.getWhitelabelDetails=function(){var e=this,t=this.fuguWidgetService.fuguWidgetData.dashboard_url;this.fuguWidgetService.getWhitelabelInfo(t).subscribe(function(t){e.commonService.redirectionTooltipText=t.data.whitelabeled_tab_title},function(e){})},e.prototype.firebaseInit=function(){var e=this;if(!f.apps.length){f.initializeApp({apiKey:"AIzaSyDUKSxSOsNympAsVaDpE1U_fNNYNYolqxo",authDomain:"hippo-web-c0760.firebaseapp.com",databaseURL:"https://hippo-web-c0760.firebaseio.com",projectId:"hippo-web-c0760",storageBucket:"hippo-web-c0760.appspot.com",messagingSenderId:"482418490296",appId:"1:482418490296:web:cff2a68586570f2b4ded4d",measurementId:"G-PYZR6GLJFN"});try{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",function(t){if(t.data.type&&t.origin==t.data.parent_origin)switch(t.data.type){case"FayeNotification":t.data.data&&t.data.data.channel_id&&(e.commonService.postMessageToParentWindow({type:"Expand",data:{}}),e.commonService.openAgentConversations.emit())}})}catch(e){console.warn(e)}}},e.prototype.openPermissionFrame=function(){this.commonService.showNotificationsConfirmation=!1;var e=window.open("#/permissions","_blank","toolbar=no,scrollbars=yes,resizable=yes,location=no,top=100,left=250,width=420,height=420");e.permissions_data={appSecretKey:this.fuguWidgetService.fuguWidgetData.appSecretKey,userDetails:this.commonService.userDetails,deviceId:this.commonService.f_uid_Id,currentLanguage:this.currentLanguage},e.document.title="Permissions",console.log("permission values",e)},e.prototype.checkUserNotificationPreference=function(){var e=!0;try{"1"==localStorage.getItem("denyNotifications")&&(e=!1)}catch(e){console.log(e)}return e},e.prototype.firebasePermission=function(){var e=this;if(!(this.fuguWidgetService.fuguWidgetData&&this.fuguWidgetService.fuguWidgetData.device_type&&this.fuguWidgetService.fuguWidgetData.app_type&&this.fuguWidgetService.fuguWidgetData.device_token))if(this.commonService.configData&&"1"==this.commonService.configData.is_web_push_enabled)try{"granted"===Notification.permission?(this.commonService.showNotificationsConfirmation=!1,setTimeout(function(){e.firebaseUpdate()})):(Notification.permission,this.checkUserNotificationPreference()&&f.messaging.isSupported()&&(this.commonService.showNotificationsConfirmation=!0))}catch(e){console.log(e),this.commonService.showNotificationsConfirmation=!1}else try{"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(e){for(var t=0,n=e;t<n.length;t++){n[t].unregister()}}).catch(function(e){console.log("Service Worker registration failed: ",e)})}catch(e){console.log(e),this.commonService.showNotificationsConfirmation=!1}},e.prototype.firebaseUpdate=function(){var e=this;try{var t=f.messaging();navigator.serviceWorker.register("sw.js").then(function(n){t.useServiceWorker(n),t.requestPermission().then(function(){t.getToken().then(function(t){t&&e.sendFCMTokenToServer(t)}).catch(function(e){console.log("An error occurred while retrieving token. ",e)})}).catch(function(e){console.log("Unable to get permission to notify.",e)}),t.onTokenRefresh(function(){var e=this;t.getToken().then(function(t){e.sendFCMTokenToServer(t)}).catch(function(e){})})})}catch(e){console.warn(e)}},e.prototype.sendFCMTokenToServer=function(e){this.fuguWidgetService.sendFCMToken(e,this.commonService.userDetails,this.commonService.getBrowserDetails()).then(function(e){console.log("Token sent",e)}).catch(function(e){console.log("ERROR while sending Token",e)})},e.ctorParameters=function(){return[{type:g.k},{type:h.a},{type:v.b},{type:_.a},{type:m.a}]},e}(),E=n("WtPQ"),D=[["#arrow[_ngcontent-%COMP%]{width:0;height:0;position:absolute}"]],k=a._15({encapsulation:0,styles:D,data:{}});function N(e){return a._41(0,[(e()(),a._39(-1,null,["\n"])),(e()(),a._18(1,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),a._16(2,212992,null,0,g.m,[g.b,a._0,a.k,[8,null],a.i],null,null),(e()(),a._39(-1,null,["\n"]))],function(e,t){e(t,2,0)},null)}var w=a._13("app-root",b,function(e){return a._41(0,[(e()(),a._18(0,0,null,null,1,"app-root",[],null,[["window","message"]],function(e,t,n){var i=!0;return"window:message"===t&&(i=!1!==a._31(e,1).onWindowOffline(n)&&i),i},N,k)),a._16(1,245760,null,0,b,[g.k,h.a,E.a,_.a,m.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),I=n("2Je8"),W=n("1GJ2"),T=n("KN8t"),O=n("NVOs"),A=n("KdFd"),L=n("Fzro"),P=n("Um43"),U=n("yfN+"),R=n("LyAf"),M=n("Sv80"),x=n("Kzgc"),F=n("6hj+"),j=n("XBTN"),B=n("PP02"),V=(n("owTz"),function(){function e(e,t){this.commonService=e,this.fuguWidgetService=t,this.isFayeConnected=!1,this._destroyCheck=!1,this.pingInterval=0,this.chatNonReassignEvent=new a.p,this.activeChannelIdMessageEvent=new a.p,this.activeChannelIdTypingEvent=new a.p,this.activeChannelIdMessageSentEvent=new a.p,this.readAllEvent=new a.p,this.messageDeliveredEvent=new a.p,this.messageReadEvent=new a.p,this.fayeConnectionEvent=new a.p}return e.prototype.userChannelSubCallback=function(e){switch(e.notification_type){case p.j.Chat_Reassign:this.chatReassigned(e);break;default:this.otherEvent(e)}},e.prototype.chatReassigned=function(e){},e.prototype.otherEvent=function(e){this.chatNonReassignEvent.emit(e)},e.prototype.subscribeToChannel=function(e){var t=this;this.unsubscribeToActiveChannel(),this.activeChannelId=e,this.active_channel_id_subscription=this.client.subscribe("/"+this.activeChannelId,function(e){t.activeChannelIdSubCallback(e)})},e.prototype.activeChannelIdSubCallback=function(e){switch(e.notification_type){case p.j.Read_All:o.a.production||console.log("Faye Service => active channel Message Read response:",e),this.messageReadEvent.emit(e);break;default:switch(e.is_typing){case p.o.Typing_Start:case p.o.Typing_Stopped:this.activeChannelIdTypingEvent.emit(e);break;case p.o.Typing_End:o.a.production||console.log("Faye Service => active channel response: ",e),this.activeChannelIdMessageEvent.emit(e)}}},e.prototype.unsubscribeToActiveChannel=function(){this.active_channel_id_subscription&&(this.active_channel_id_subscription.cancel(),this.active_channel_id_subscription.unsubscribe(),this.activeChannelId=0)},e.prototype.sendMessage=function(e){var t=this,n=e.is_typing==p.o.Typing_End,i=-1;n&&(i=e.index);this.client.publish("/"+this.activeChannelId,e,{deadline:18,attempts:1}).then(function(e){n&&-1!=i&&t.activeChannelIdMessageSentEvent.emit({index:i})},function(e){console.log("message sending failed!")})},e.prototype.publishOnChannel=function(e,t){return t.device_payload={device_details:navigator.userAgent,device_id:this.commonService.f_uid_Id,device_type:3},this.client.publish("/"+e,t,{attempts:1}).then(function(e){},function(e){throw console.log("message sending failed! "+JSON.stringify(e.message)),e})},e.prototype.setupSchedular=function(){var e=this,t=function(){Faye.Scheduler.apply(this,arguments)};return(t.prototype=Object.create(Faye.Scheduler.prototype)).send=function(){if("/meta/handshake"==this.message.channel||"/meta/connect"==this.message.channel)try{this.message.ext={user_id:e.commonService.userDetails.user_id,device_type:3,source:4}}catch(e){console.log("Faye Before send ",e)}Faye.Scheduler.prototype.send.apply(this,arguments)},t.prototype.fail=function(){Faye.Scheduler.prototype.fail.apply(this,arguments),this.message.channel=="/"+this.activeChannelId&&console.log("Failed message:",this.message)},t.prototype.succeed=function(){Faye.Scheduler.prototype.succeed.apply(this,arguments),this.message.channel=="/"+this.activeChannelId&&console.log("succeeded\xce message:",this.message)},t},e.prototype.appSecretKeySubCallback=function(e,t){var n=this;switch(t.notification_type){case p.j.Read_All:t.user_type==p.p.Agent&&t.channel_id==this.activeChannelId&&this.readAllEvent.emit(t);break;case p.j.Read_Unread:t.channel_id==this.activeChannelId&&(t.delivered_at?this.messageDeliveredEvent.emit(t):this.messageReadEvent.emit(t));break;case p.j.User_Migration:var i=this.commonService.userDetails.user_id;console.log("Widget Faye Migration: ",t),i!=t.migrated_to&&i!=t.user_id||(console.log("valid user migration"),this.fuguWidgetService.putUserDetails(this.commonService.putUserData()).takeWhile(function(){return n.alive}).subscribe(function(e){var t=e.data.device_key;if(n.commonService.setCookie("f_uid",t,10),n.commonService.updateUserDetails(e.data),n.commonService.postMessageToParentWindow({type:"Collapse"}),n.unsubscribeAllSubscriptions(!1),n.setupSubscriptions(),n.commonService.userDetails.user_unique_key.length>1)n.commonService.isConversationListValid=Object.keys(e.data.conversations).length>0;else{var i=e.data.conversations.filter(function(e){return-1!=e.channel_id});n.commonService.isConversationListValid=0!=i.length}}));break;case p.j.User_Logout:if(t.user_id==this.commonService.userDetails.user_id){localStorage.removeItem("f_uid_Id"),localStorage.removeItem("f_uid");var a=localStorage.getItem("fuguWidget");a&&(delete(a=JSON.parse(a))[this.commonService.website_host],localStorage.setItem("fuguWidget",JSON.stringify(a))),this.unsubscribeAllSubscriptions(!0),this.commonService.postMessageToParentWindow({type:"Shutdown",data:{}})}}},e.prototype.sendAck_Delivered=function(e){var t="/"+this.fuguWidgetService.fuguWidgetData.appSecretKey+"/readUnread";this.client.publish(t,e).then(function(e){},function(e){console.log("failed to send delivered msg to server")})},e.prototype.sendAck_Read=function(e){var t="/"+this.activeChannelId;this.client.publish(t,e).then(function(e){},function(e){console.log("failed to send read msg to server")})},e.prototype.setupVideoCallSubscriptions=function(e){var t=this;if(this.logError("from Dashboard => logging in user ",new Date),this.unsubscribeAllSubscriptions(this._destroyCheck),!this._destroyCheck){var n=this.setupSchedular();return this.client=new Faye.Client(""+o.a.FAYE_ENDPOINT,{scheduler:n,timeout:20,retry:2,interval:20}),this.client.disable("autodisconnect"),this.returnPromise().then(function(){t.active_channel_id_subscription=t.client.subscribe("/"+e,function(e){t.activeChannelIdSubCallback(e)})})}},e.prototype.returnPromise=function(){return new Promise(function(e,t){e("returned")})},e.prototype.setupSubscriptions=function(){var e=this;if(this.logError("from AgentWidget => logging in user ",new Date),this.unsubscribeAllSubscriptions(this._destroyCheck),!this._destroyCheck){var t=this.setupSchedular();this.client=new Faye.Client(""+o.a.FAYE_ENDPOINT,{scheduler:t,timeout:20,retry:2,interval:20}),this.client.disable("autodisconnect"),this.user_channel_subscription=this.client.subscribe("/"+this.commonService.userDetails.user_channel,function(t){o.a.production||console.log("in FayeService => UserChannelSubs",t),e.userChannelSubCallback(t)});this.client.on("transport:down",function(){var t=new Date,n=" Faye disconnected =>  "+t.toLocaleTimeString();console.log(n),e.isFayeConnected=!1,e.fayeConnectionEvent.emit(!1),e.ping(),e.pingInterval=setInterval(function(){e._destroyCheck?clearInterval(e.pingInterval):e.ping()},2e3),e.logError(n,t)}),this.client.on("transport:up",function(){var t=new Date,n=" Faye connected =>  "+t.toLocaleTimeString();console.log(n),e.isFayeConnected=!0,e.fayeConnectionEvent.emit(!0),clearInterval(e.pingInterval),e.logError(n,t)}),console.log("Faye service => Subscribed all channels")}},e.prototype.unsubscribeAllSubscriptions=function(e,t){this._destroyCheck=e,e&&this.logError(t,new Date),this.active_channel_id_subscription&&(this.active_channel_id_subscription.cancel(),this.active_channel_id_subscription.unsubscribe()),this.user_channel_subscription&&(this.user_channel_subscription.cancel(),this.user_channel_subscription.unsubscribe()),this.app_secret_key_subscription&&(this.app_secret_key_subscription.cancel(),this.app_secret_key_subscription.unsubscribe()),this.client&&(this.client.unsubscribe(),this.client.disconnect()),this.activeChannelId=0,console.log("Faye service => unsubscribed all channels")},e.prototype.ping=function(){if(!this._destroyCheck&&this.commonService.userDetails.user_id){var e=moment().utc().format(),t={message:"",full_name:this.commonService.userDetails.full_name,user_id:this.commonService.userDetails.user_id,date_time:e,is_typing:p.o.Typing_Stopped,message_type:p.i.Customer_Agent_Message,user_type:p.p.Customer,on_subscribe:1};this.sendMessage(t)}},e.prototype.ngOnDestroy=function(){this.unsubscribeAllSubscriptions(!0),this.alive=!1},e.prototype.logError=function(e,t){console.log("widget Faye exceptions: ",e)},e.ctorParameters=function(){return[{type:h.a},{type:_.a}]},e}()),H=n("2CBl"),G=n("NG/o"),J=a._14(l,[b],function(e){return a._29([a._30(512,a.k,a._10,[[8,[w]],[3,a.k],a.E]),a._30(5120,a.A,a._28,[[3,a.A]]),a._30(4608,I.m,I.l,[a.A]),a._30(5120,a.c,a._19,[]),a._30(5120,a.y,a._25,[]),a._30(5120,a.z,a._26,[]),a._30(4608,s.c,s.t,[I.c]),a._30(6144,a.R,null,[s.c]),a._30(4608,s.f,d,[]),a._30(5120,s.d,function(e,t,n,i){return[new s.l(e),new s.p(t),new s.o(n,i)]},[I.c,I.c,I.c,s.f]),a._30(4608,s.e,s.e,[s.d,a.G]),a._30(135680,s.n,s.n,[I.c]),a._30(4608,s.m,s.m,[s.e,s.n]),a._30(5120,W.a,T.d,[]),a._30(5120,W.c,T.e,[]),a._30(4608,W.b,T.c,[W.a,W.c]),a._30(5120,a.P,T.f,[s.m,W.b,a.G]),a._30(6144,s.q,null,[s.n]),a._30(4608,a.Y,a.Y,[a.G]),a._30(4608,s.h,s.h,[I.c]),a._30(4608,s.j,s.j,[I.c]),a._30(4608,O.D,O.D,[]),a._30(4608,A.i,A.n,[I.c,a.K,A.l]),a._30(4608,A.o,A.o,[A.i,A.m]),a._30(5120,A.a,function(e){return[e]},[A.o]),a._30(4608,A.k,A.k,[]),a._30(6144,A.j,null,[A.k]),a._30(4608,A.h,A.h,[A.j]),a._30(6144,A.b,null,[A.h]),a._30(5120,A.f,A.p,[A.b,[2,A.a]]),a._30(4608,A.c,A.c,[A.f]),a._30(4608,O.g,O.g,[]),a._30(4608,L.c,L.c,[]),a._30(4608,L.h,L.b,[]),a._30(5120,L.j,L.k,[]),a._30(4608,L.i,L.i,[L.c,L.h,L.j]),a._30(4608,L.g,L.a,[]),a._30(5120,L.e,L.l,[L.i,L.g]),a._30(4608,P.b,T.b,[a.P,s.b]),a._30(5120,g.a,g.u,[g.k]),a._30(4608,g.d,g.d,[]),a._30(6144,g.f,null,[g.d]),a._30(135680,g.n,g.n,[g.k,a.D,a.j,a.w,g.f]),a._30(4608,g.e,g.e,[]),a._30(5120,g.h,g.x,[g.v]),a._30(5120,a.b,function(e){return[e]},[g.h]),a._30(5120,U.b,u,[A.c]),a._30(4608,R.a,R.b,[]),a._30(4608,M.b,M.a,[]),a._30(4608,x.b,x.a,[]),a._30(4608,F.a,F.a,[]),a._30(4608,E.a,E.a,[F.a,U.b,R.a,M.b,x.b,E.b,E.c]),a._30(4608,_.a,_.a,[L.e]),a._30(135680,h.a,h.a,[_.a]),a._30(4608,j.a,j.a,[]),a._30(4608,B.a,B.a,[]),a._30(135680,V,V,[h.a,_.a]),a._30(4608,m.a,m.a,[h.a,_.a]),a._30(135680,H.a,H.a,[m.a,j.a,h.a,_.a]),a._30(512,I.b,I.b,[]),a._30(1024,a.o,s.r,[]),a._30(1024,a.F,function(){return[g.r()]},[]),a._30(512,g.v,g.v,[a.w]),a._30(1024,a.d,function(e,t,n){return[s.s(e,t),g.w(n)]},[[2,s.i],[2,a.F],g.v]),a._30(512,a.e,a.e,[[2,a.d]]),a._30(131584,a._17,a._17,[a.G,a._11,a.w,a.o,a.k,a.e]),a._30(2048,a.g,null,[a._17]),a._30(512,a.f,a.f,[a.g]),a._30(512,s.a,s.a,[[3,s.a]]),a._30(512,O.A,O.A,[]),a._30(512,O.m,O.m,[]),a._30(512,A.e,A.e,[]),a._30(512,A.d,A.d,[]),a._30(512,O.w,O.w,[]),a._30(512,L.f,L.f,[]),a._30(1024,g.q,g.s,[[3,g.k]]),a._30(512,g.p,g.c,[]),a._30(512,g.b,g.b,[]),a._30(512,I.h,I.e,[I.p,[2,I.a]]),a._30(512,I.g,I.g,[I.h]),a._30(512,a.j,a.j,[]),a._30(512,a.D,a.V,[a.j,[2,a.W]]),a._30(1024,g.i,function(){return[[{path:"payment",loadChildren:"./modules/payment-request/payment-request.module#PaymentRequestModule"},{path:"payment-request",loadChildren:"./modules/new-payment-request/new-payment-request.module#NewPaymentRequestModule"},{path:"call",loadChildren:"./modules/video-call/video-call.module#VideoCallModule"},{path:"conference",loadChildren:"./modules/conference/conference.module#ConferenceModule"},{path:"openconference/:lang/:accessToken/:userId/:enUserId/:transactionId/:userChannel/:agentType/:name/:isVideoMuted",loadChildren:"./modules/conference-link/conference-link.module#ConferenceLinkModule"},{path:"openconference/:lang/:accessToken/:userId/:enUserId/:transactionId/:userChannel/:agentType/:name",loadChildren:"./modules/conference-link/conference-link.module#ConferenceLinkModule"},{path:"newcall",loadChildren:"./modules/calling/calling.module#CallingModule"},{path:"",loadChildren:"./modules/layout/layout.module#LayoutModule"},{path:"permissions",loadChildren:"./modules/permissions/permissions.module#PermissionsModule"}]]},[]),a._30(256,g.g,{},[]),a._30(1024,g.k,g.t,[a.g,g.p,g.b,I.g,a.w,a.D,a.j,g.i,g.g,[2,g.o],[2,g.j]]),a._30(512,g.l,g.l,[[2,g.q],[2,g.k]]),a._30(512,T.a,T.a,[]),a._30(512,G.a,G.a,[]),a._30(512,v.a,v.a,[]),a._30(512,l,l,[]),a._30(256,A.l,"XSRF-TOKEN",[]),a._30(256,A.m,"X-XSRF-TOKEN",[]),a._30(256,E.c,void 0,[]),a._30(256,E.b,void 0,[])])});o.a.production&&Object(a._4)();var q=n("DtRx");localStorage.getItem("device_uuid")||localStorage.setItem("device_uuid",q()),Object(s.k)().bootstrapModuleFactory(J)},zCXK:function(e,t,n){"use strict";var i,a,o,s,r,c,u,d;n.d(t,"i",function(){return i}),n.d(t,"p",function(){return a}),n.d(t,"j",function(){return o}),n.d(t,"o",function(){return s}),n.d(t,"h",function(){return r}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"m",function(){return g}),n.d(t,"l",function(){return h}),n.d(t,"g",function(){return l}),n.d(t,"q",function(){return S}),n.d(t,"a",function(){return C}),n.d(t,"d",function(){return _}),n.d(t,"n",function(){return p}),n.d(t,"f",function(){return m}),n.d(t,"k",function(){return f}),n.d(t,"r",function(){return v}),function(e){e[e.Customer_Agent_Message=1]="Customer_Agent_Message",e[e.Activity_Message=2]="Activity_Message",e[e.Private_Message=3]="Private_Message",e[e.Image_Message=10]="Image_Message",e[e.File_Message=11]="File_Message",e[e.Bot_Text_Message=15]="Bot_Text_Message",e[e.Form_Message=17]="Form_Message",e[e.Button_Message=16]="Button_Message",e[e.Feedback_Message=14]="Feedback_Message",e[e.Video_Call=18]="Video_Call",e[e.Payment_Message=19]="Payment_Message",e[e.Custom_Action_Message=20]="Custom_Action_Message",e[e.CARDS=21]="CARDS",e[e.NEW_PAYMENT_MESSAGE=22]="NEW_PAYMENT_MESSAGE",e[e.MULTISELECTION=23]="MULTISELECTION",e[e.VIDEO_STREAM=24]="VIDEO_STREAM",e[e.ADDRESS=25]="ADDRESS",e[e.DATE_TIME=26]="DATE_TIME",e[e.ATTACHMENT=28]="ATTACHMENT",e[e.GROUP_CALL=27]="GROUP_CALL"}(i||(i={})),function(e){e[e.Bot=0]="Bot",e[e.Customer=2]="Customer",e[e.Agent=1]="Agent"}(a||(a={})),function(e){e[e.Chat_Reassign=3]="Chat_Reassign",e[e.Read_Unread=5]="Read_Unread",e[e.Read_All=6]="Read_All",e[e.User_Migration=7]="User_Migration",e[e.User_Logout=8]="User_Logout",e[e.User_Online_Status=15]="User_Online_Status",e[e.INRIDE_STATUS=16]="INRIDE_STATUS",e[e.CHANNEL_REFRESH_AGENT=17]="CHANNEL_REFRESH_AGENT",e[e.Channel_Refresh=13]="Channel_Refresh",e[e.MODIFY_MESSAGE=24]="MODIFY_MESSAGE"}(o||(o={})),function(e){e[e.Typing_End=0]="Typing_End",e[e.Typing_Start=1]="Typing_Start",e[e.Typing_Stopped=2]="Typing_Stopped"}(s||(s={})),function(e){e[e.Sending=0]="Sending",e[e.Sent=1]="Sent",e[e.Delivered=2]="Delivered",e[e.Read=3]="Read"}(r||(r={})),function(e){e[e.p2p=1]="p2p",e[e.other=0]="other",e[e.AdminToAdmin=2]="AdminToAdmin",e[e.AgentSupport=3]="AgentSupport"}(c||(c={})),function(e){e[e.DEFAULT_CHANNEL=2]="DEFAULT_CHANNEL",e[e.DEFAULT=4]="DEFAULT",e[e.HELP_CHANNEL=5]="HELP_CHANNEL",e[e.BROADCAST_CHANNEL=6]="BROADCAST_CHANNEL",e[e.ANNOUNCEMENT=7]="ANNOUNCEMENT",e[e.OPERATIONAL=8]="OPERATIONAL",e[e.AGENT_SUPPORT=9]="AGENT_SUPPORT"}(u||(u={})),function(e){e[e.EMAIL=5]="EMAIL",e[e.MESSENGER=6]="MESSENGER",e[e.WHATSAPP=7]="WHATSAPP"}(d||(d={}));var l,g=function(){function e(){}return e.HANDSHAKE="/socketio/handshake",e.MESSAGE="/socketio/message",e.MESSAGE_NEW="/socketio/event",e.MESSAGE_CHANNEL="/socketio/message",e.MESSAGE_ACKNOWLEDGEMENT="/socketio/message",e.SUBSCRIBE_APP="/socketio/subscribe/business",e.UNSUBSCRIBE_APP="/socketio/unsubscribe/business",e.SUBSCRIBE_USER="/socketio/subscribe/user",e.UNSUBSCRIBE_USER="/socketio/unsubscribe/user",e.SUBSCRIBE_CHANNEL="/socketio/subscribe/chat",e.UNSUBSCRIBE_CHANNEL="/socketio/unsubscribe/chat",e.SOCKET_EVENT="/socketio/server/push",e}(),h=function(){function e(){}return e.CONNECTED="CONNECTED",e.CONNECTING="CONNECTING",e.DISCONNECTED="DISCONNECTED",e}();!function(e){e[e.MESSAGE_DELETED=0]="MESSAGE_DELETED",e[e.MESSAGE_NOT_DELETED=1]="MESSAGE_NOT_DELETED",e[e.MISSED_CALL=2]="MISSED_CALL",e[e.COMPLETED_CALL=3]="COMPLETED_CALL"}(l||(l={}));var _,p,m,f,v,S=function(){function e(){}return e.START_CONFERENCE="START_CONFERENCE",e.START_CONFERENCE_IOS="START_CONFERENCE_IOS",e.READY_TO_CONNECT_CONFERENCE="READY_TO_CONNECT_CONFERENCE",e.READY_TO_CONNECT_CONFERENCE_IOS="READY_TO_CONNECT_CONFERENCE_IOS",e.HUNGUP_CONFERENCE="HUNGUP_CONFERENCE",e.REJECT_CONFERENCE="REJECT_CONFERENCE",e.USER_BUSY_CONFERENCE="USER_BUSY_CONFERENCE",e.ANSWER_CONFERENCE="ANSWER_CONFERENCE",e.OFFER_CONFERENCE="OFFER_CONFERENCE",e.START_CALL="START_CALL",e.CALL_REJECTED="CALL_REJECTED",e.READY_TO_CONNECT="READY_TO_CONNECT",e.CALL_HUNG_UP="CALL_HUNG_UP",e.USER_BUSY="USER_BUSY",e.VIDEO_OFFER="VIDEO_OFFER",e.NEW_ICE_CANDIDATE="NEW_ICE_CANDIDATE",e.VIDEO_ANSWER="VIDEO_ANSWER",e.SWITCH_TO_CONFERENCE="SWITCH_TO_CONFERENCE",e.REFRESH_CALL="REFRESH_CALL",e.START_GROUP_CALL="START_GROUP_CALL",e.JOIN_GROUP_CALL="JOIN_GROUP_CALL",e.REJECT_GROUP_CALL="REJECT_GROUP_CALL",e.LEAVE_GROUP_CALL="LEAVE_GROUP_CALL",e.END_GROUP_CALL="END_GROUP_CALL",e}(),C=function(){function e(){}return e.CALL_PICKUP="Call not picked within 30 sec(web)",e.GET_USER_MEDIA="Call disconnected by getUserMedia Error(web)",e.CONF_SWITCH="Switched to conference call(web)",e.CONF_INVITE="Call disconnected while inviting members for conf(web)",e.CALL_TAB_CLOSE="Call disconnected as window was closed(web)",e.CALL_DISCONNECTED="Ice connection status changed to disconnected(web)",e.CALL_HANGUP="call disconnected by user(web)",e}();!function(e){e[e.User_Not_In_Channel=409]="User_Not_In_Channel",e[e.User_Blocked=401]="User_Blocked",e[e.Message_Deleted=410]="Message_Deleted",e[e.Turn_Credential_Fail=413]="Turn_Credential_Fail",e[e.Poll_expired=414]="Poll_expired",e[e.app_old_version=415]="app_old_version",e[e.Channel_Not_Found=407]="Channel_Not_Found",e[e.Move_To_New_Fugu=429]="Move_To_New_Fugu",e[e.MAX_USERS=421]="MAX_USERS"}(_||(_={})),function(e){e[e.DELETE=1]="DELETE",e[e.EDIT=2]="EDIT"}(p||(p={})),function(e){e[e.MESSAGE=1]="MESSAGE",e[e.CALL_MISSED=2]="CALL_MISSED",e[e.CALL_ANSWERED=3]="CALL_ANSWERED",e[e.DELETED=4]="DELETED",e[e.EDITED=5]="EDITED"}(m||(m={})),function(e){e[e.AGENT_PLAN=1]="AGENT_PLAN",e[e.BUSINESS_PLAN=2]="BUSINESS_PLAN"}(f||(f={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.CALL_INVITE=1]="CALL_INVITE"}(v||(v={}))}},[0]);